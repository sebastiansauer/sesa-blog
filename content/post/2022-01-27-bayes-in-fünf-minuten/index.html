---
title: Bayes in fünf Minuten
author: Sebastian Sauer
date: '2022-01-27'
slug: bayes-in-fünf-minuten
categories:
  - rstats
tags:
  - Bayes
  - modelling
editor_options: 
  chunk_output_type: console
---

<script src="{{< blogdown/postref >}}index_files/header-attrs/header-attrs.js"></script>


<div id="das-ist-ein-fünf-minuten-bayes-kurs" class="section level1">
<h1>Das ist ein Fünf-Minuten-Bayes-Kurs</h1>
<p>Sie würden gerne Bayes lernen und dafür zwischen 1-3 Wochen Zeit investieren?
Dann sind Sie hier falsch.
Dieser Post zeigt einen Kurzüberblick in Bayes-Statistik in fünf Minuten.
Naja, ich probiere es jedenfalls.</p>
</div>
<div id="forschungsfrage" class="section level1">
<h1>Forschungsfrage</h1>
<p>Sagen wir, uns interessiert folgende Forschungsfrage, die mit Methoden der Inferenz-Statistik untersucht werden soll.
In diesem Fall Bayes-Inferenz (nicht Frequentistische Statistik).</p>
<blockquote>
<p>Verbrauchen Autos mit Automatik-Getriebe im Durchschnitt mehr Sprit als Autos mit manuellem Getriebe?</p>
</blockquote>
<ul>
<li>AV: mpg (miles per gallone)</li>
<li>UV: am (automatic vs. manual)</li>
</ul>
<p>Die AV ist metrisch. Die UV ist binär. Wir vergleichen also zwei Gruppen,
das ist ähnlich zum t-Test.</p>
</div>
<div id="vorbereitung" class="section level1">
<h1>Vorbereitung</h1>
<pre class="r"><code>data(&quot;mtcars&quot;)  #
library(rstanarm)  # Bayes
library(tidyverse)  # Datenjudo</code></pre>
<p>Der Datensatz <code>mtcars</code> ist “fest eingebaut” in R, so dass wir ihn nicht irgendwo herunterladen müsstenn.</p>
<p>Hilfe zum Datensatz bekommt man so:</p>
<pre class="r"><code>help(mtcars) # Hilfe/Codebook zum Datensatz 
# Output hier nicht dargestellt</code></pre>
</div>
<div id="visualisierung" class="section level1">
<h1>Visualisierung</h1>
<p>Zwar nicht Gegenstand dieses Posts,
aber hilfreich,
daher hier nur kurz ein Bild ohne Syntax:</p>
<p><img src="chunk-img/unnamed-chunk-4-1.png" width="100%" style="display: block; margin: auto;" /></p>
</div>
<div id="zur-interpretation-der-regression" class="section level1">
<h1>Zur Interpretation der Regression</h1>
<p>Die einfache Regression (also mit 1 UV) hat zwei Koeffizienten:
Achsenabschnitt und Steigung.</p>
<p>Bei einer binären (zweistufigen) UV bedeutet das:</p>
<ul>
<li>Der Achsenabschnitt zeigt den vorhergesagten Wert (der Mittelwert) der 1. Gruppe.</li>
<li>Die Steigung zeigt den (vorhergesagten) Unterschied der zweiten Gruppe (im Vergleich zur 1. Gruppe).</li>
</ul>
<p>Der vorhergesagte Wert der zweiten Gruppe ergibt sich also als Summe von Achsenabschnitt plus Steigung.</p>
</div>
<div id="modell-berechnen" class="section level1">
<h1>Modell berechnen</h1>
<p>Nutzen wir das allgemeine (oder verallgemeinerte) lineare Modell,
um unsere Forschungsfrage zu beantworten.
Anders gesagt: Wir berechnen einen Regression.
Das schöne an einer Regression ist,
sie passt<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a> auf die meisten Probleme,
so ähnlich wie ein Schweizer Taschenmesser.</p>
<pre class="r"><code>m1 &lt;- stan_glm(mpg ~ am, data = mtcars)</code></pre>
<p>Schön oder: Die Syntax von <code>stan_glm()</code> entspricht der Syntax von <code>lm()</code>.</p>
</div>
<div id="unterschied-zwischen-den-zwei-gruppen" class="section level1">
<h1>Unterschied zwischen den zwei Gruppen</h1>
<pre class="r"><code>coef(m1)</code></pre>
<pre><code>## (Intercept)          am 
##   17.176828    7.191718</code></pre>
<p>Was wir bekommen,
sind Punktschätzer für die Population:</p>
<p>Der Achsenabschnitt wird auf ca. 17 geschätzt.
Die Steigung (Unterschied zwischen den Gruppen) wird auf ca. 7 geschätzt.</p>
</div>
<div id="aber-ist-der-unterschied-zwischen-den-gruppen-signifikant" class="section level1">
<h1>Aber ist der Unterschied zwischen den Gruppen “signifikant”?</h1>
<p>In Bayes gibt es das Wort “signifikant” nicht.
Formulieren wir die Frage doch so um:</p>
<blockquote>
<p>Liegt der Wert “Null” innerhalb oder außerhalb des 90%-Konfidenzintervalls (KI?</p>
</blockquote>
<pre class="r"><code>posterior_interval(m1)</code></pre>
<pre><code>##                    5%       95%
## (Intercept) 15.305426 19.002113
## am           4.283285 10.191900
## sigma        4.094537  6.247447</code></pre>
<p>Das 90%-KI wird auf den Bereich von ca. 4 bis 10 geschätzt.
Die Null liegt <em>nicht</em> in diesem Intervall.</p>
<p>Folglich verwerfen wir die Nullhypothese.</p>
</div>
<div id="ich-hätte-aber-lieber-ein-89-oder-ein-95-ki" class="section level1">
<h1>Ich hätte aber lieber ein 89% oder ein 95%-KI!</h1>
<p>Also gut…</p>
<pre class="r"><code>posterior_interval(m1, prob = .89)  # oder auch prob = .95 etc.</code></pre>
<pre><code>##                  5.5%     94.5%
## (Intercept) 15.349152 18.966175
## am           4.341207 10.080387
## sigma        4.112788  6.200624</code></pre>
</div>
<div id="warum-eigentlich-89" class="section level1">
<h1>Warum eigentlich 89%?</h1>
<p>Richard McElreath begründet die 89 so: Es ist die kleinste Primzahl kleiner als 95.
Noch Fragen? :smile</p>
</div>
<div id="fertig" class="section level1">
<h1>Fertig</h1>
<p>Ich fasse zusammen. Wir haben gerade Bayes-Statistik betrieben.
Und zwar haben wir ein einfaches Regressionsmodell, analog zum t-Test, berechnet.
Dann haben wir ein Bayes-Analog zur Nullhypothese und zum Konfidenzintervall uns ausgeben lassen.</p>
</div>
<div id="interpretation-der-ergebnisse" class="section level1">
<h1>Interpretation der Ergebnisse</h1>
<p>Im Frequentismus sind die zentralen Statistiken schwierig zu interpretieren.</p>
<p>In der Bayes-Statistik ist es einfach.
Wir können sagen, dass (laut Modell!) der (mittlere) Gruppenunterschie mit 90% Wahrscheinlichkeit zwischen 4 und 10 Gallonen Sprit liegt.</p>
</div>
<div class="footnotes footnotes-end-of-document">
<hr />
<ol>
<li id="fn1"><p>Oft ist sie nur eine Näherung und manchmal eine schlechte, aber man kann erstaunlich viel mit der Regression machen, auch nicht-lineare wie polynombasierte oder exponentielle Zusammenhänge modellieren.<a href="#fnref1" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
