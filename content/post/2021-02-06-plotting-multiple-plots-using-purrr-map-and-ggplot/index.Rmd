---
title: Plotting multiple plots using purrr::map and ggplot
author: Sebastian Sauer
date: '2021-02-06'
slug: plotting-multiple-plots-using-purrr-map-and-ggplot
categories:
  
tags:
  - visualization
output:
  blogdown::html_page:
    toc: yes
    number_sections: yes
---



```{r knitr-setup, echo = FALSE}
knitr::opts_chunk$set(
  comment = "#>",
  collapse = TRUE,
  message = FALSE,
  warning = FALSE,
  cache = TRUE,
  out.width = "100%",
  fig.align = 'center',
  fig.width = 6,
  fig.asp = 0.618,  # 1 / phi
  fig.show = "hold"
)
```



# Load packages

```{r load-libs, message = FALSE, warning = FALSE}
library(tidyverse)  # data wrangling
```



# Sample data


`mtcars` to the rescue!

```{r}
data(mtcars)
```



# Motivation


Say we have a data frame where we would like to plot each numeric variables's distribution.

There are a number of good solutions outthere such as [this one](https://aosmith.rbind.io/2018/08/20/automating-exploratory-plots/), or [here](https://stackoverflow.com/questions/62323725/problem-with-passing-ggplot-titles-in-a-purrr-loop-list-columns), or [here](https://stackoverflow.com/questions/45362462/how-do-pipes-work-with-purrr-map-function-and-the-dot-symbol).




# Way 1


```{r fig.show="hold", out.width="70%" }
mtcars %>% 
  select(where(is.numeric)) %>% 
  map( ~ {ggplot(mtcars, aes(x = .)) + geom_density()}
  )
```

Note that the chunks options above were like this:

`{r fig.show="hold", out.width=70%"}`


Works. But does not show the variable names. 
Next try.



# Way 2


```{r fig.show="hold" }
dens_fun <- function(var, name) {
  
  ggplot(mtcars, aes(x = var)) +
    geom_density() +
    labs(x = name,
         title = name)
}

mtcars %>% 
  select(where(is.numeric)) %>% 
  map2(.y = names(.),
       ~ dens_fun(.x, .y)
  )
```




# Reproducibility

```{r reproducibility, echo = FALSE}
## Reproducibility info
options(width = 120)
devtools::session_info()


