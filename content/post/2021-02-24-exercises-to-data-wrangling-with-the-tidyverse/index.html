---
title: Exercises to data wrangling with the tidyverse
author: Sebastian Sauer
date: '2021-02-24'
slug: exercises-to-data-wrangling-with-the-tidyverse
categories:
  - rstats
tags:
  - tutorial
output:
  blogdown::html_page:
    toc: yes
    number_sections: yes
---

<script src="{{< blogdown/postref >}}index_files/header-attrs/header-attrs.js"></script>

<div id="TOC">
<ul>
<li><a href="#exercise-collection-life-exptectancy"><span class="toc-section-number">1</span> Exercise collection: Life exptectancy</a></li>
<li><a href="#disclosure"><span class="toc-section-number">2</span> Disclosure</a></li>
<li><a href="#research-questions"><span class="toc-section-number">3</span> Research questions</a></li>
<li><a href="#first-steps"><span class="toc-section-number">4</span> First steps</a></li>
<li><a href="#getting-help"><span class="toc-section-number">5</span> Getting help</a></li>
<li><a href="#exercises"><span class="toc-section-number">6</span> Exercises</a>
<ul>
<li><a href="#data-wrangling"><span class="toc-section-number">6.1</span> Data Wrangling</a></li>
<li><a href="#data-visualization"><span class="toc-section-number">6.2</span> Data Visualization</a></li>
</ul></li>
<li><a href="#solutions"><span class="toc-section-number">7</span> Solutions</a></li>
<li><a href="#reproducibility"><span class="toc-section-number">8</span> Reproducibility</a></li>
</ul>
</div>

<div id="exercise-collection-life-exptectancy" class="section level1" number="1">
<h1><span class="header-section-number">1</span> Exercise collection: Life exptectancy</h1>
<p>Get the data from <a href="https://raw.githubusercontent.com/swcarpentry/r-novice-gapminder/gh-pages/_episodes_rmd/data/gapminder-FiveYearData.csv">this source</a>.</p>
</div>
<div id="disclosure" class="section level1" number="2">
<h1><span class="header-section-number">2</span> Disclosure</h1>
<p>This exercises are based on a tutorial by <a href="http://www.rebeccabarter.com/">Rebekka Barter</a>. Great work!</p>
</div>
<div id="research-questions" class="section level1" number="3">
<h1><span class="header-section-number">3</span> Research questions</h1>
<p>How did life expectancy change in the course of the last decades? Did id change differently between the continents?</p>
<p>How does life expectancy differs today between the continents?</p>
<p>Is life expectancy related to GDP? If so, to what degree (and form)? Is this assocication moderated by continent?</p>
</div>
<div id="first-steps" class="section level1" number="4">
<h1><span class="header-section-number">4</span> First steps</h1>
<p>First, open a script or Rmd file in RStudio. Next make sure you start (“load”) the necessary R packages, and import the data.</p>
</div>
<div id="getting-help" class="section level1" number="5">
<h1><span class="header-section-number">5</span> Getting help</h1>
<ul>
<li><a href="https://github.com/rstudio/cheatsheets/raw/master/data-transformation.pdf">Data wrangling</a> cheatsheet</li>
<li><a href="https://rstudio.com/wp-content/uploads/2015/03/ggplot2-cheatsheet.pdf">Data vizualization</a> cheatsheet</li>
<li>It’s a low brainer, but it works: Just google for it. For example, if you are struggling how to reduce transparency of dots in a (ggplot2) plot, try “ggplot2 reduce transparency points” or similar queries.</li>
</ul>
</div>
<div id="exercises" class="section level1" number="6">
<h1><span class="header-section-number">6</span> Exercises</h1>
<div id="data-wrangling" class="section level2" number="6.1">
<h2><span class="header-section-number">6.1</span> Data Wrangling</h2>
<ol style="list-style-type: decimal">
<li><p>Filter the data for the Americas in 2007, deselect all other variables. By the way, what’s</p></li>
<li><p>Create the variable <code>gdp</code>, defined as the product of population size and gdp per person.</p></li>
<li><p>Identify the observation with lowest gdp per person.</p></li>
<li><p>Identify all observations with above average life expectancy, stratified for each continent.</p></li>
<li><p>Count the observations identified in the last step.</p></li>
<li><p>Compute the mean life expectancy (the grand mean; ie., across all observations).</p></li>
<li><p>Compute the mean life expectancy for each year.</p></li>
</ol>
</div>
<div id="data-visualization" class="section level2" number="6.2">
<h2><span class="header-section-number">6.2</span> Data Visualization</h2>
<ol style="list-style-type: decimal">
<li><p>Create a scatter plot showing the association of gdp per person and life expectancy. Put the putative cause on the X axis and the putative effect on the y axis.</p></li>
<li><p>Add a rolling average line (also known as LOESS smoother).</p></li>
<li><p>Add a linear model line.</p></li>
<li><p>Create a scatter plot with year on the x axis, and life expectancy on the y axis. Each point should indicate the average life expectancy per year. Connect the dots with a line.</p></li>
<li><p>Modify the last plot so that there is a line for each continent (ie., group by continent).</p></li>
<li><p>Create a scatter plot showing the assocation of gdp per person and life expectancy. Put the putative cause on the X axis and the putative effect on the y axis. The color of the dots should map to the respective continent.</p></li>
<li><p>Modify the last plot so that the size of the dots represents the population size. In addition, increase the transparency of the dots in order to mitigate overplotting.</p></li>
<li><p>Modify the last plot so that there’s a facet (sub-plot) for each continent.</p></li>
<li><p>Modify the last plot so that GDP is log transformed.</p></li>
</ol>
</div>
</div>
<div id="solutions" class="section level1" number="7">
<h1><span class="header-section-number">7</span> Solutions</h1>
<p>You’ll find the solutions <a href="http://www.rebeccabarter.com/blog/2019-08-05_base_r_to_tidyverse/">here</a>.</p>
</div>
<div id="reproducibility" class="section level1" number="8">
<h1><span class="header-section-number">8</span> Reproducibility</h1>
<pre><code>#&gt; ─ Session info ───────────────────────────────────────────────────────────────────────────────────────────────────────
#&gt;  setting  value                       
#&gt;  version  R version 4.0.2 (2020-06-22)
#&gt;  os       macOS  10.16                
#&gt;  system   x86_64, darwin17.0          
#&gt;  ui       X11                         
#&gt;  language (EN)                        
#&gt;  collate  en_US.UTF-8                 
#&gt;  ctype    en_US.UTF-8                 
#&gt;  tz       Europe/Berlin               
#&gt;  date     2021-02-24                  
#&gt; 
#&gt; ─ Packages ───────────────────────────────────────────────────────────────────────────────────────────────────────────
#&gt;  package     * version    date       lib source                           
#&gt;  assertthat    0.2.1      2019-03-21 [1] CRAN (R 4.0.0)                   
#&gt;  blogdown      1.1        2021-01-19 [1] CRAN (R 4.0.2)                   
#&gt;  bookdown      0.21.6     2021-02-02 [1] Github (rstudio/bookdown@6c7346a)
#&gt;  bslib         0.2.4.9000 2021-02-02 [1] Github (rstudio/bslib@b3cd7a9)   
#&gt;  cachem        1.0.4      2021-02-13 [1] CRAN (R 4.0.2)                   
#&gt;  callr         3.5.1      2020-10-13 [1] CRAN (R 4.0.2)                   
#&gt;  cli           2.3.1      2021-02-23 [1] CRAN (R 4.0.2)                   
#&gt;  crayon        1.4.1      2021-02-08 [1] CRAN (R 4.0.2)                   
#&gt;  desc          1.2.0      2018-05-01 [1] CRAN (R 4.0.0)                   
#&gt;  devtools      2.3.2      2020-09-18 [1] CRAN (R 4.0.2)                   
#&gt;  digest        0.6.27     2020-10-24 [1] CRAN (R 4.0.2)                   
#&gt;  ellipsis      0.3.1      2020-05-15 [1] CRAN (R 4.0.0)                   
#&gt;  evaluate      0.14       2019-05-28 [1] CRAN (R 4.0.0)                   
#&gt;  fastmap       1.1.0      2021-01-25 [1] CRAN (R 4.0.2)                   
#&gt;  fs            1.5.0      2020-07-31 [1] CRAN (R 4.0.2)                   
#&gt;  glue          1.4.2      2020-08-27 [1] CRAN (R 4.0.2)                   
#&gt;  htmltools     0.5.1.1    2021-01-22 [1] CRAN (R 4.0.2)                   
#&gt;  jquerylib     0.1.3      2020-12-17 [1] CRAN (R 4.0.2)                   
#&gt;  jsonlite      1.7.2      2020-12-09 [1] CRAN (R 4.0.2)                   
#&gt;  knitr         1.31       2021-01-27 [1] CRAN (R 4.0.2)                   
#&gt;  lifecycle     1.0.0      2021-02-15 [1] CRAN (R 4.0.2)                   
#&gt;  magrittr      2.0.1      2020-11-17 [1] CRAN (R 4.0.2)                   
#&gt;  memoise       2.0.0      2021-01-26 [1] CRAN (R 4.0.2)                   
#&gt;  pkgbuild      1.2.0      2020-12-15 [1] CRAN (R 4.0.2)                   
#&gt;  pkgload       1.2.0      2021-02-23 [1] CRAN (R 4.0.2)                   
#&gt;  prettyunits   1.1.1      2020-01-24 [1] CRAN (R 4.0.0)                   
#&gt;  processx      3.4.5      2020-11-30 [1] CRAN (R 4.0.2)                   
#&gt;  ps            1.5.0      2020-12-05 [1] CRAN (R 4.0.2)                   
#&gt;  purrr         0.3.4      2020-04-17 [1] CRAN (R 4.0.0)                   
#&gt;  R6            2.5.0      2020-10-28 [1] CRAN (R 4.0.2)                   
#&gt;  remotes       2.2.0      2020-07-21 [1] CRAN (R 4.0.2)                   
#&gt;  rlang         0.4.10     2020-12-30 [1] CRAN (R 4.0.2)                   
#&gt;  rmarkdown     2.7        2021-02-19 [1] CRAN (R 4.0.2)                   
#&gt;  rprojroot     2.0.2      2020-11-15 [1] CRAN (R 4.0.2)                   
#&gt;  sass          0.3.1      2021-01-24 [1] CRAN (R 4.0.2)                   
#&gt;  sessioninfo   1.1.1      2018-11-05 [1] CRAN (R 4.0.0)                   
#&gt;  stringi       1.5.3      2020-09-09 [1] CRAN (R 4.0.2)                   
#&gt;  stringr       1.4.0      2019-02-10 [1] CRAN (R 4.0.0)                   
#&gt;  testthat      3.0.2      2021-02-14 [1] CRAN (R 4.0.2)                   
#&gt;  usethis       2.0.1      2021-02-10 [1] CRAN (R 4.0.2)                   
#&gt;  withr         2.4.1      2021-01-26 [1] CRAN (R 4.0.2)                   
#&gt;  xfun          0.21       2021-02-10 [1] CRAN (R 4.0.2)                   
#&gt;  yaml          2.2.1      2020-02-01 [1] CRAN (R 4.0.0)                   
#&gt; 
#&gt; [1] /Users/sebastiansaueruser/Rlibs
#&gt; [2] /Library/Frameworks/R.framework/Versions/4.0/Resources/library</code></pre>
</div>
