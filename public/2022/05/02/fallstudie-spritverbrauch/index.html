<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Hugo 0.135.0">


<title>Energie sparen (!) - sesa blog</title>
<meta property="og:title" content="Energie sparen (!) - sesa blog">


  <link href='https://data-se.netlify.app/favicon.ico' rel='icon' type='image/x-icon'/>



  








<link href='//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css' rel='stylesheet' type='text/css' />



<link rel="stylesheet" href="/css/fonts.css" media="all">
<link rel="stylesheet" href="/css/main.css" media="all">



  </head>
  <body>
    <div class="wrapper">
      <header class="header">
        <nav class="nav">
  <a href="/" class="nav-logo">
    <img src="/images/logo-data-se.png"
         width="50"
         height="50"
         alt="Logo">
  </a>

  <ul class="nav-links">
    
    <li><a href="/about/">About</a></li>
    
    <li><a href="/privacy/">Data privacy</a></li>
    
    <li><a href="/tags/">Tags</a></li>
    
  </ul>
</nav>

      </header>



<main class="content" role="main">

    <h1 class="article-title">Energie sparen (!)</h1>


    <span class="article-meta">
      Karsten Lübke und Sebastian Sauer / 16 mins read <br>
    </span>



    
    <span class="article-date">2022-05-02</span>
    

    <div class="article-content">
      
<script src="https://data-se.netlify.app/2022/05/02/fallstudie-spritverbrauch/index_files/header-attrs/header-attrs.js"></script>

<div id="TOC">
<ul>
<li><a href="#vorbereitung" id="toc-vorbereitung"><span class="toc-section-number">1</span> Vorbereitung</a>
<ul>
<li><a href="#r-pakete" id="toc-r-pakete"><span class="toc-section-number">1.1</span> R-Pakete</a></li>
<li><a href="#forschungsfrage" id="toc-forschungsfrage"><span class="toc-section-number">1.2</span> Forschungsfrage</a></li>
<li><a href="#versuchsdaten" id="toc-versuchsdaten"><span class="toc-section-number">1.3</span> Versuchsdaten</a></li>
</ul></li>
<li><a href="#beschreibung-des-datensatzes" id="toc-beschreibung-des-datensatzes"><span class="toc-section-number">2</span> Beschreibung des Datensatzes</a>
<ul>
<li><a href="#fragen" id="toc-fragen"><span class="toc-section-number">2.1</span> Fragen</a></li>
<li><a href="#umrechnung" id="toc-umrechnung"><span class="toc-section-number">2.2</span> Umrechnung</a></li>
</ul></li>
<li><a href="#zusammenhang-geschwindigkeit-und-verbrauch" id="toc-zusammenhang-geschwindigkeit-und-verbrauch"><span class="toc-section-number">3</span> Zusammenhang Geschwindigkeit und Verbrauch</a>
<ul>
<li><a href="#linearität-des-zusammenhangs" id="toc-linearität-des-zusammenhangs"><span class="toc-section-number">3.1</span> Linearität des Zusammenhangs</a></li>
<li><a href="#fragen-1" id="toc-fragen-1"><span class="toc-section-number">3.2</span> Fragen</a></li>
<li><a href="#verschönern" id="toc-verschönern"><span class="toc-section-number">3.3</span> Verschönern</a></li>
<li><a href="#vor--und-nachteile-der-skalierung" id="toc-vor--und-nachteile-der-skalierung"><span class="toc-section-number">3.4</span> Vor- und Nachteile der Skalierung</a></li>
</ul></li>
<li><a href="#verbrauchsdaten" id="toc-verbrauchsdaten"><span class="toc-section-number">4</span> Verbrauchsdaten</a>
<ul>
<li><a href="#fragen-zum-datensatz" id="toc-fragen-zum-datensatz"><span class="toc-section-number">4.1</span> Fragen zum Datensatz</a></li>
<li><a href="#beschreibung-des-datensatzes-1" id="toc-beschreibung-des-datensatzes-1"><span class="toc-section-number">4.2</span> Beschreibung des Datensatzes</a>
<ul>
<li><a href="#interpretation-der-verteilung" id="toc-interpretation-der-verteilung"><span class="toc-section-number">4.2.1</span> Interpretation der Verteilung</a></li>
</ul></li>
<li><a href="#empirische-verteilungsfunktion" id="toc-empirische-verteilungsfunktion"><span class="toc-section-number">4.3</span> Empirische Verteilungsfunktion</a>
<ul>
<li><a href="#fragen-2" id="toc-fragen-2"><span class="toc-section-number">4.3.1</span> Fragen</a></li>
</ul></li>
<li><a href="#quantile-der-empirischen-verteilung" id="toc-quantile-der-empirischen-verteilung"><span class="toc-section-number">4.4</span> Quantile der empirischen Verteilung</a></li>
<li><a href="#frage" id="toc-frage"><span class="toc-section-number">4.5</span> Frage</a></li>
</ul></li>
<li><a href="#überblick-über-die-verteilung" id="toc-überblick-über-die-verteilung"><span class="toc-section-number">5</span> Überblick über die Verteilung</a>
<ul>
<li><a href="#fragen-3" id="toc-fragen-3"><span class="toc-section-number">5.1</span> Fragen</a></li>
</ul></li>
<li><a href="#klimaanlage" id="toc-klimaanlage"><span class="toc-section-number">6</span> Klimaanlage</a>
<ul>
<li><a href="#frage-1" id="toc-frage-1"><span class="toc-section-number">6.1</span> Frage</a></li>
</ul></li>
<li><a href="#geschwindigkeit-und-verbrauch" id="toc-geschwindigkeit-und-verbrauch"><span class="toc-section-number">7</span> Geschwindigkeit und Verbrauch</a>
<ul>
<li><a href="#frage-2" id="toc-frage-2"><span class="toc-section-number">7.1</span> Frage</a></li>
</ul></li>
<li><a href="#your-turn" id="toc-your-turn"><span class="toc-section-number">8</span> Your-Turn</a></li>
<li><a href="#reproduzierbarkeit" id="toc-reproduzierbarkeit"><span class="toc-section-number">9</span> Reproduzierbarkeit</a></li>
</ul>
</div>

<p>Karsten Lübke erstellte die ursprüngliche Version dieser Fallstudie.
Sebastian Sauer änderte einige Teile, v.a. zu R, ab.</p>
<div id="vorbereitung" class="section level1" number="1">
<h1><span class="header-section-number">1</span> Vorbereitung</h1>
<div id="r-pakete" class="section level2" number="1.1">
<h2><span class="header-section-number">1.1</span> R-Pakete</h2>
<pre class="r"><code>library(tidyverse)
library(easystats)</code></pre>
</div>
<div id="forschungsfrage" class="section level2" number="1.2">
<h2><span class="header-section-number">1.2</span> Forschungsfrage</h2>
<ul>
<li>Womit hängt der Energieverbrauch (z.B. Benzin) beim Autofahren zusammen?</li>
</ul>
<p>Mögliche Einflußfaktoren für <span class="math inline">\(y\)</span> (Verbrauch) sind u.a.</p>
<ul>
<li>Fahrzeugtyp</li>
<li>Geschwindigkeit</li>
<li>Fahrtstrecke</li>
<li>Terrain</li>
<li>Art des Benzins</li>
<li>Fahrstil</li>
<li>Straße</li>
<li>Temperatur</li>
<li>Klimanalage</li>
<li>Gewicht</li>
</ul>
</div>
<div id="versuchsdaten" class="section level2" number="1.3">
<h2><span class="header-section-number">1.3</span> Versuchsdaten</h2>
<p>Das Buch <em>Transportation Energy Data Book Edition 39</em> liefert Daten für den Zusammenhang zwischen Geschwindigkeit und Benzinverbrauch:
<a href="https://tedb.ornl.gov/wp-content/uploads/2021/02/TEDB_Ed_39.pdf#page=136">https://tedb.ornl.gov/wp-content/uploads/2021/02/TEDB_Ed_39.pdf#page=136</a></p>
<p>Diese werden hier abgeschrieben und in der Datentabelle <code>TEBD</code> hinterlegt:</p>
<pre class="r"><code>TEBD &lt;- data.frame(
  mpg = c(24.4, 27.9, 30.5, 31.7, 31.2, 31.0, 31.6,
          32.4, 32.4, 31.4, 29.2, 26.8, 24.8),
  mph = seq(from = 15, to= 75, by = 5)
)
# Datenstruktur
str(TEBD)</code></pre>
<pre><code>## &#39;data.frame&#39;:    13 obs. of  2 variables:
##  $ mpg: num  24.4 27.9 30.5 31.7 31.2 31 31.6 32.4 32.4 31.4 ...
##  $ mph: num  15 20 25 30 35 40 45 50 55 60 ...</code></pre>
<pre class="r"><code># Obere 6 Beobachtungen
head(TEBD)</code></pre>
<pre><code>##    mpg mph
## 1 24.4  15
## 2 27.9  20
## 3 30.5  25
## 4 31.7  30
## 5 31.2  35
## 6 31.0  40</code></pre>
</div>
</div>
<div id="beschreibung-des-datensatzes" class="section level1" number="2">
<h1><span class="header-section-number">2</span> Beschreibung des Datensatzes</h1>
<div id="fragen" class="section level2" number="2.1">
<h2><span class="header-section-number">2.1</span> Fragen</h2>
<ul>
<li><p>Handelt es sich um Daten von aktuellen Fahrzeugen? Die Daten kommen von Autos aus dem Jahr 1997.</p></li>
<li><p>Sind es die Verbrauchsdaten eines Fahrzeugs? Nein, von 9 Fahrzeugen.</p></li>
</ul>
</div>
<div id="umrechnung" class="section level2" number="2.2">
<h2><span class="header-section-number">2.2</span> Umrechnung</h2>
<p>Die Daten liegen im amerikanischen Messsystem vor: <em>miles per gallon</em> (<code>mpg</code>) und <em>miles per hour</em> (<code>mph</code>).</p>
<p>Zur besseren Lesbarkeit sollten wir diese in die uns bekannten Einheiten umrechnen.
Eine Meile entspricht 1.609344 km, eine (amerikanische) Gallone 3.785411784 l:</p>
<pre class="r"><code>TEBD &lt;- 
  TEBD %&gt;%
  mutate(kmh = mph * 1.609344) %&gt;%
  mutate(l100km =   (100 * 3.785411784) / (1.609344 * mpg))</code></pre>
</div>
</div>
<div id="zusammenhang-geschwindigkeit-und-verbrauch" class="section level1" number="3">
<h1><span class="header-section-number">3</span> Zusammenhang Geschwindigkeit und Verbrauch</h1>
<div id="linearität-des-zusammenhangs" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> Linearität des Zusammenhangs</h2>
<ul>
<li>Ist der Zusammenhang zwischen <code>l100km</code> und <code>mpg</code> linear? Nein: <span class="math inline">\(l100km = \frac{(100 * 3.785411784)}{(1.609344 * mpg)}\)</span></li>
</ul>
<p>Korrelation mit Streudiagramm:</p>
<pre class="r"><code>plot1 &lt;- 
TEBD %&gt;% 
  cor_test(&quot;kmh&quot;, &quot;l100km&quot;) %&gt;% 
  plot()

plot1</code></pre>
<p><img src="https://data-se.netlify.app/2022/05/02/fallstudie-spritverbrauch/index_files/figure-html/unnamed-chunk-1-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p>Wie man sieht, gibt es (praktisch) keinen linearen Zusammenhang zwischen den beiden Variablen.</p>
<p>So kann man die Korrelation auch berechnen:</p>
<pre class="r"><code>TEBD %&gt;% 
  select(kmh, l100km) %&gt;% 
  correlation()</code></pre>
<pre><code>## # Correlation Matrix (pearson-method)
## 
## Parameter1 | Parameter2 |    r |        95% CI | t(11) |     p
## --------------------------------------------------------------
## kmh        |     l100km | 0.04 | [-0.52, 0.58] |  0.13 | 0.900
## 
## p-value adjustment method: Holm (1979)
## Observations: 13</code></pre>
<pre class="r"><code>TEBD %&gt;% 
  select(kmh, l100km) %&gt;% 
  correlation() %&gt;% 
  summary() %&gt;% 
  plot()</code></pre>
<p><img src="https://data-se.netlify.app/2022/05/02/fallstudie-spritverbrauch/index_files/figure-html/unnamed-chunk-3-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p>Natürlich gibt es viele Möglichkeiten,
die Korrelation (mit R) zu berechnen und zu visualisieren.</p>
</div>
<div id="fragen-1" class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> Fragen</h2>
<ul>
<li>Ist der Zusammenhang zwischen <code>kmh</code> und <code>l100km</code> linear? Nein, eher eine Parabel.</li>
<li>Bei welcher Geschwindigkeit ist der Verbrauch minimal? Zwischen 80 und 90 km/h.</li>
</ul>
</div>
<div id="verschönern" class="section level2" number="3.3">
<h2><span class="header-section-number">3.3</span> Verschönern</h2>
<p>Fügen wir noch Achsenbeschriftungen und ein anderes “Stylesheet” hinzu:</p>
<pre class="r"><code>plot1 + 
  labs( x = &quot;km/h&quot;, 
        y = &quot;l/100km&quot;,
        title = &quot;Verbrauch je Geschwindigkeit&quot;, 
        subtitle =&quot;Quelle: Transportation Energy Data Book, Edition 39, Tablle 4.34&quot;) +
  theme_modern()</code></pre>
<p><img src="https://data-se.netlify.app/2022/05/02/fallstudie-spritverbrauch/index_files/figure-html/TEBD-Streu2-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p>Über <code>ylim()</code> bzw. <code>xlim()</code> können die Achsenskalierung angepasst werden, z.B. die y-Achse so, dass diese bei 0 anfängt und bei 10 aufhört.</p>
<pre class="r"><code>plot1 + 
  labs( x = &quot;km/h&quot;, 
        y = &quot;l/100km&quot;,
        title = &quot;Verbrauch je Geschwindigkeit&quot;, 
        subtitle =&quot;Quelle: Transportation Energy Data Book, Edition 39, Tablle 4.34&quot;) +
  ylim(c(0, 10))</code></pre>
<p><img src="https://data-se.netlify.app/2022/05/02/fallstudie-spritverbrauch/index_files/figure-html/TEBD-Streu3-1.png" width="100%" style="display: block; margin: auto;" /></p>
</div>
<div id="vor--und-nachteile-der-skalierung" class="section level2" number="3.4">
<h2><span class="header-section-number">3.4</span> Vor- und Nachteile der Skalierung</h2>
<ul>
<li>Welche Vor- und Nachteile hat die Skalierung?</li>
</ul>
<p>Ohne Skalierung (Beginn bei <span class="math inline">\(y=0\)</span>) wird suggeriert, dass der Verbauch schon <em>minimal</em> (bei 0 ist), aber die Unterschiede werden deutlicher. Mit Skalierung wird deutlicher erkennbar, dass auch im minimialen Fall über 7l verbraucht werden.</p>
<p>Die Achsenskalierung sollte zielgruppen - und zweckorientiert sein, aber nicht manipulieren.</p>
<p><strong>Achte auf die Achsenskalierung!</strong></p>
</div>
</div>
<div id="verbrauchsdaten" class="section level1" number="4">
<h1><span class="header-section-number">4</span> Verbrauchsdaten</h1>
<p>Andreas Wagener hat für ein paar Monate am Ende einer Autofahrt seine Verbrauchsdaten samt Kovariablen (wie z.B. Temperatur) gesammelt und über <a href="https://www.kaggle.com/">Kaggle</a> unter der <a href="http://www.gnu.org/licenses/old-licenses/gpl-2.0.en.html">GPL 2</a> Lizenz veröffentlicht.
Für diesen Kurs stehen die Daten unter <a href="https://statistix.org/Data/VerbrauchAW.csv%5D">https://statistix.org/Data/VerbrauchAW.csv</a>:</p>
<pre class="r"><code># URL der Daten
d_url &lt;- &quot;https://statistix.org/Data/VerbrauchAW.csv&quot;
# Daten herunterladen
d &lt;- read_csv2(d_url)</code></pre>
<!-- Hinweis: Nachdem die Daten einmal heruntergeladen wurden, kann die Option `eval = TRUE` auf `eval = FALSE` geändert werden. Dann wird der Chunk nicht mehr ausgeführt. -->
<p>Kontrolle der Daten:</p>
<pre class="r"><code># Struktur
str(d)</code></pre>
<pre><code>## spec_tbl_df [388 × 12] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
##  $ distance     : num [1:388] 28 12 11.2 12.9 18.5 8.3 7.8 12.3 4.9 11.9 ...
##  $ consume      : num [1:388] 5 4.2 5.5 3.9 4.5 6.4 4.4 5 6.4 5.3 ...
##  $ speed        : num [1:388] 26 30 38 36 46 50 43 40 26 30 ...
##  $ temp_inside  : num [1:388] 21.5 21.5 21.5 21.5 21.5 21.5 21.5 21.5 21.5 21.5 ...
##  $ temp_outside : num [1:388] 12 13 15 14 15 10 11 6 4 9 ...
##  $ specials     : chr [1:388] NA NA NA NA ...
##  $ gas_type     : chr [1:388] &quot;E10&quot; &quot;E10&quot; &quot;E10&quot; &quot;E10&quot; ...
##  $ AC           : num [1:388] 0 0 0 0 0 0 0 0 0 0 ...
##  $ rain         : num [1:388] 0 0 0 0 0 0 0 0 0 0 ...
##  $ sun          : num [1:388] 0 0 0 0 0 0 0 0 0 0 ...
##  $ refill liters: num [1:388] 45 NA NA NA NA NA NA NA NA NA ...
##  $ refill gas   : chr [1:388] &quot;E10&quot; NA NA NA ...
##  - attr(*, &quot;spec&quot;)=
##   .. cols(
##   ..   distance = col_double(),
##   ..   consume = col_double(),
##   ..   speed = col_double(),
##   ..   temp_inside = col_double(),
##   ..   temp_outside = col_double(),
##   ..   specials = col_character(),
##   ..   gas_type = col_character(),
##   ..   AC = col_double(),
##   ..   rain = col_double(),
##   ..   sun = col_double(),
##   ..   `refill liters` = col_double(),
##   ..   `refill gas` = col_character()
##   .. )
##  - attr(*, &quot;problems&quot;)=&lt;externalptr&gt;</code></pre>
<pre class="r"><code># Obere Beobachtungen der Tabelle
head(d)</code></pre>
<pre><code>## # A tibble: 6 × 12
##   distance consume speed temp_inside temp_outside specials gas_type    AC  rain
##      &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt;
## 1     28       5      26        21.5           12 &lt;NA&gt;     E10          0     0
## 2     12       4.2    30        21.5           13 &lt;NA&gt;     E10          0     0
## 3     11.2     5.5    38        21.5           15 &lt;NA&gt;     E10          0     0
## 4     12.9     3.9    36        21.5           14 &lt;NA&gt;     E10          0     0
## 5     18.5     4.5    46        21.5           15 &lt;NA&gt;     E10          0     0
## 6      8.3     6.4    50        21.5           10 &lt;NA&gt;     E10          0     0
## # … with 3 more variables: sun &lt;dbl&gt;, `refill liters` &lt;dbl&gt;, `refill gas` &lt;chr&gt;</code></pre>
<div id="fragen-zum-datensatz" class="section level2" number="4.1">
<h2><span class="header-section-number">4.1</span> Fragen zum Datensatz</h2>
<ul>
<li>Handelt es sich um eine Beobachtungsstudie oder um ein randomisiertes Experiment? Beobachtungsstudie</li>
<li>Was ist hier eine Beobachtungseinheit? Eine Fahrt</li>
<li>Wie viele Beobachtungen liegen vor? 388</li>
<li>Wie viele Variablen liegen vor? 12</li>
<li>Welches Skalenniveau hat die Variable <code>consume</code> (angegebener Verbrauch in l/100km)? Metrisch-Verhältnisskaliert<br />
</li>
<li>Welches Skalenniveau hat die Variable <code>AC</code> (Klimaanlage)? Nominal mit 2 Ausprägungen (1: an, 0: aus)</li>
</ul>
</div>
<div id="beschreibung-des-datensatzes-1" class="section level2" number="4.2">
<h2><span class="header-section-number">4.2</span> Beschreibung des Datensatzes</h2>
<pre class="r"><code>d_describe &lt;- d %&gt;% 
  select(consume) %&gt;% 
  describe_distribution() 

d_describe</code></pre>
<pre><code>## Variable | Mean |   SD | IQR |         Range | Skewness | Kurtosis |   n | n_Missing
## ------------------------------------------------------------------------------------
## consume  | 4.91 | 1.03 |   1 | [3.30, 12.20] |     2.94 |    14.49 | 388 |         0</code></pre>
<p>Ein Histogramm visualisiert die Verteilung der von Andreas Wagener bei seinen Fahrten realisierten Verbräuche:</p>
<pre class="r"><code>describe_distribution(d$consume) %&gt;% 
  plot()</code></pre>
<p><img src="https://data-se.netlify.app/2022/05/02/fallstudie-spritverbrauch/index_files/figure-html/unnamed-chunk-4-1.png" width="100%" style="display: block; margin: auto;" /></p>
<div id="interpretation-der-verteilung" class="section level3" number="4.2.1">
<h3><span class="header-section-number">4.2.1</span> Interpretation der Verteilung</h3>
<ul>
<li>Was können Sie dem Histogramm entnehmen?</li>
</ul>
<p>Am häufigsten liegt der Verbrauch zwischen 4 und 5 l/100km. Selten liegt der Verbrauch über 8 l/100km.
Es gibt häufig vergleichsweise niedrige Verbräuche, selten relativ hohe, d.h. die Verteilung ist rechtschief (linkssteil). Es gibt nur einen Schwerpunkt, d.h. die Verteilung ist unimodal.</p>
</div>
</div>
<div id="empirische-verteilungsfunktion" class="section level2" number="4.3">
<h2><span class="header-section-number">4.3</span> Empirische Verteilungsfunktion</h2>
<p>Berechnen wir den Anteil <code>p</code> mit einem Verbrauch nicht größer als <code>q</code>, d.h. den Wert der empirischen Verteilungsfunktion <span class="math inline">\(F_n\)</span>, den Wert also der dem Anteil der Fahrten entspricht, in denen der Verbrauch z.B. kleiner oder gleich <code>q = 10</code>l war:</p>
<pre class="r"><code>d %&gt;% 
  count(consume &lt;= 10) %&gt;% 
  mutate(prop = n / sum(n))</code></pre>
<pre><code>## # A tibble: 2 × 3
##   `consume &lt;= 10`     n    prop
##   &lt;lgl&gt;           &lt;int&gt;   &lt;dbl&gt;
## 1 FALSE               3 0.00773
## 2 TRUE              385 0.992</code></pre>
<div id="fragen-2" class="section level3" number="4.3.1">
<h3><span class="header-section-number">4.3.1</span> Fragen</h3>
<p>Ändern Sie den Code so, dass Sie die folgenden Fragen beantworten können.</p>
<pre class="r"><code>d %&gt;% 
  count(consume &lt;= 10) %&gt;% 
  mutate(prop = n / sum(n))</code></pre>
<pre><code>## # A tibble: 2 × 3
##   `consume &lt;= 10`     n    prop
##   &lt;lgl&gt;           &lt;int&gt;   &lt;dbl&gt;
## 1 FALSE               3 0.00773
## 2 TRUE              385 0.992</code></pre>
<ul>
<li>Wie hoch ist der Anteil der Fahren mit einem Verbrauch kleiner gleich 5l?</li>
</ul>
<pre class="r"><code>d %&gt;% 
  count(consume &lt;= 5) %&gt;% 
  mutate(prop = n / sum(n))</code></pre>
<pre><code>## # A tibble: 2 × 3
##   `consume &lt;= 5`     n  prop
##   &lt;lgl&gt;          &lt;int&gt; &lt;dbl&gt;
## 1 FALSE            129 0.332
## 2 TRUE             259 0.668</code></pre>
<p>Er schafft es in ca. 67% seiner Fahrten einen Verbrauch unter 5l/100km zu erreichen.</p>
<ul>
<li>Wie hoch ist der Anteil der Fahren mit einem Verbrauch größer als 7.5l?</li>
</ul>
<pre class="r"><code>d %&gt;% 
  count(consume &gt; 7.5) %&gt;% 
  mutate(prop = n / sum(n))</code></pre>
<pre><code>## # A tibble: 2 × 3
##   `consume &gt; 7.5`     n   prop
##   &lt;lgl&gt;           &lt;int&gt;  &lt;dbl&gt;
## 1 FALSE             379 0.977 
## 2 TRUE                9 0.0232</code></pre>
</div>
</div>
<div id="quantile-der-empirischen-verteilung" class="section level2" number="4.4">
<h2><span class="header-section-number">4.4</span> Quantile der empirischen Verteilung</h2>
<p>Suchen wir das 5%-Quantil der “Verbrauch-Verteilung”,
den Wert also, der von 5% der Verbrauchswerte aller Fahrten nicht übertroffen wird.</p>
<p>Dazu berechnen wir die <em>kumulierte (Häufigkeits-)Verteilung</em>:</p>
<pre class="r"><code>d &lt;- 
  d %&gt;% 
  mutate(consume_cume_dist = cume_dist(consume))</code></pre>
<p>Das sieht so aus:</p>
<pre class="r"><code>d %&gt;% 
  ggplot(aes(x = consume, y = consume_cume_dist)) +
  geom_line()</code></pre>
<p><img src="https://data-se.netlify.app/2022/05/02/fallstudie-spritverbrauch/index_files/figure-html/unnamed-chunk-8-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p>Jetzt ziehen wir die Zeile, bei der <code>consume_cume_dist==.05</code>,
bzw. der größte Wert unter dieser Grenze:</p>
<pre class="r"><code>d %&gt;% 
  filter(consume_cume_dist &lt; .05) %&gt;% 
  summarise(max(consume))</code></pre>
<pre><code>## # A tibble: 1 × 1
##   `max(consume)`
##            &lt;dbl&gt;
## 1            3.7</code></pre>
<p>In 5% seiner Fahrten lag der Verbrauch bei ca. 3,7l - oder darunter.</p>
<p>Ändern Sie den Code so, dass Sie die folgende Frage beantworten können.</p>
</div>
<div id="frage" class="section level2" number="4.5">
<h2><span class="header-section-number">4.5</span> Frage</h2>
<ul>
<li>Mit welchem (maximalem) Verbrauch kam Andreas Wagener in 80% seiner Fahren zurecht?</li>
</ul>
<pre class="r"><code>d %&gt;% 
  filter(consume_cume_dist &lt; .80) %&gt;% 
  pull(consume) %&gt;% 
  max()</code></pre>
<pre><code>## [1] 5.3</code></pre>
<p>In 80% seiner Fahrten kam er mit 5.4l/100km - oder weniger hin.</p>
<p>Merke: Die empirische <em>Verteilungsfunktion</em> <span class="math inline">\(F_n(X)\)</span> zeigt die <em>kumulierte (relative) Häufigkeit</em> eines Merkmals <span class="math inline">\(X\)</span>.</p>
</div>
</div>
<div id="überblick-über-die-verteilung" class="section level1" number="5">
<h1><span class="header-section-number">5</span> Überblick über die Verteilung</h1>
<p><code>describe_distribution()</code> liefert einen Überblick über die gängigen Kennzahlen einer metrischen Variable:</p>
<pre class="r"><code>d %&gt;% 
  select(consume) %&gt;% 
  describe_distribution()</code></pre>
<pre><code>## Variable | Mean |   SD | IQR |         Range | Skewness | Kurtosis |   n | n_Missing
## ------------------------------------------------------------------------------------
## consume  | 4.91 | 1.03 |   1 | [3.30, 12.20] |     2.94 |    14.49 | 388 |         0</code></pre>
<div id="fragen-3" class="section level2" number="5.1">
<h2><span class="header-section-number">5.1</span> Fragen</h2>
<ul>
<li>Wie hoch ist der durchschnittliche Verbrauch? 4.9</li>
<li>Wie groß ist der Median? 4.7</li>
<li>In welchen Bereich liegen 50% der Verbräuche? min-median, also 3.3 bis 4.7; Q1 bis Q3 (die mittleren 50%), also 4.3 bs 5.3; und median bis max, also 4.7 bis 5.3 (jeweils einschließlich)</li>
<li>In der Datentabelle liegen außerdem noch die Innentemperatur (<code>temp_inside</code>) sowie die Außentemperatur vor (<code>temp_outside</code>). Beim welcher Temperatur wird die Streuung größer sein? <code>temp_outside</code></li>
</ul>
<pre class="r"><code>d %&gt;% 
  select(temp_outside, temp_inside) %&gt;% 
  describe_distribution()</code></pre>
<pre><code>## Variable     |  Mean |   SD | IQR |          Range | Skewness | Kurtosis |   n | n_Missing
## ------------------------------------------------------------------------------------------
## temp_outside | 11.36 | 6.99 |   9 | [-5.00, 31.00] |     0.57 |    -0.02 | 388 |         0
## temp_inside  | 21.93 | 1.01 |   1 | [19.00, 25.50] |     0.99 |     2.80 | 376 |        12</code></pre>
</div>
</div>
<div id="klimaanlage" class="section level1" number="6">
<h1><span class="header-section-number">6</span> Klimaanlage</h1>
<p>Vergleichen wir den Verbrauch bei Fahrt mit vs. ohne Klimananlage.</p>
<p>Die Variable <code>AC</code> muss aber zunächst als kategoriale Variable definiert werden.</p>
<pre class="r"><code>d &lt;-
  d %&gt;% 
  mutate(AC_f = case_when(AC == 0 ~ &quot;Nein&quot;,
                        AC == 1 ~ &quot;Ja&quot;))</code></pre>
<pre class="r"><code>lm1 &lt;- lm(consume ~ AC_f, data = d)</code></pre>
<pre class="r"><code>estimate_means(lm1)</code></pre>
<pre><code>## Estimated Marginal Means
## 
## AC_f | Mean |   SE |       95% CI
## ---------------------------------
## Nein | 4.88 | 0.05 | [4.78, 4.99]
## Ja   | 5.26 | 0.19 | [4.89, 5.63]
## 
## Marginal means estimated at AC_f</code></pre>
<p>Plotten wir den Unterschied:</p>
<pre class="r"><code>estimate_means(lm1) %&gt;% 
  plot() </code></pre>
<p><img src="https://data-se.netlify.app/2022/05/02/fallstudie-spritverbrauch/index_files/figure-html/unnamed-chunk-15-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p>Sieht nicht so schön aus.
Probieren wir es so:</p>
<pre class="r"><code>ggplot(d, aes(x = AC_f, y = consume, fill = AC_f)) +
  geom_violin() +
  geom_jitter2() +
  theme_modern()</code></pre>
<p><img src="https://data-se.netlify.app/2022/05/02/fallstudie-spritverbrauch/index_files/figure-html/unnamed-chunk-16-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p>Oder mit Boxplot:</p>
<pre class="r"><code>ggplot(d, aes(x = AC_f, y = consume, fill = AC_f)) +
  geom_boxplot() +
  geom_jitter(alpha = .3, width = .2) +
  theme_modern()</code></pre>
<p><img src="https://data-se.netlify.app/2022/05/02/fallstudie-spritverbrauch/index_files/figure-html/unnamed-chunk-17-1.png" width="100%" style="display: block; margin: auto;" /></p>
<div id="frage-1" class="section level2" number="6.1">
<h2><span class="header-section-number">6.1</span> Frage</h2>
<ul>
<li>Was können Sie über eine Vergleich der Verteilungen der der Verbräuche mit und ohne Klimaanlage aussagen?</li>
</ul>
<p>So wohl im Diagramm, als auch in den Kennzahlen (z.B. Median (<code>median</code>), aber auch arithmetischer Mittelwert (<code>mean</code>)), ist zu erkennen, dass die Verteilung des Verbrauchs in l/100km höher ist, wenn die Klimaanlage an ist.
In beiden Gruppen gibt es Ausreißer nach oben.</p>
</div>
</div>
<div id="geschwindigkeit-und-verbrauch" class="section level1" number="7">
<h1><span class="header-section-number">7</span> Geschwindigkeit und Verbrauch</h1>
<p>Berechnen wir die Korrelation (zur Erinnerung, eine Kennzahl zum linearen Zusammenhang).</p>
<pre class="r"><code>d %&gt;% 
  cor_test(&quot;consume&quot;, &quot;speed&quot;) </code></pre>
<pre><code>## Parameter1 | Parameter2 |     r |         95% CI | t(386) |         p
## ---------------------------------------------------------------------
## consume    |      speed | -0.23 | [-0.32, -0.13] |  -4.60 | &lt; .001***
## 
## Observations: 388</code></pre>
<p>Oder eine Korrelationsmatrix, also alle Korrelationen von mehreren Variablen:</p>
<pre class="r"><code>d %&gt;% 
  select(consume, speed, distance) %&gt;% 
  correlation()</code></pre>
<pre><code>## # Correlation Matrix (pearson-method)
## 
## Parameter1 | Parameter2 |     r |         95% CI | t(386) |         p
## ---------------------------------------------------------------------
## consume    |      speed | -0.23 | [-0.32, -0.13] |  -4.60 | &lt; .001***
## consume    |   distance | -0.13 | [-0.23, -0.03] |  -2.56 | 0.011*   
## speed      |   distance |  0.56 | [ 0.49,  0.63] |  13.36 | &lt; .001***
## 
## p-value adjustment method: Holm (1979)
## Observations: 388</code></pre>
<p>Streudiagram::</p>
<pre class="r"><code>d %&gt;% 
  cor_test(&quot;consume&quot;, &quot;speed&quot;) %&gt;% 
  plot()</code></pre>
<p><img src="https://data-se.netlify.app/2022/05/02/fallstudie-spritverbrauch/index_files/figure-html/unnamed-chunk-20-1.png" width="100%" style="display: block; margin: auto;" /></p>
<div id="frage-2" class="section level2" number="7.1">
<h2><span class="header-section-number">7.1</span> Frage</h2>
<ul>
<li>Was ist zu beachten, wenn in dieser Datentabelle der Zusammenhang zwischen <code>consume</code> und <code>speed</code> analysiert wird?</li>
</ul>
<p>Es handelt sich um die Durchschnittswerte der Variablen. So kann es bei niedrigen Durchschnittsgeschwindigkeiten z.B. sein, das häufig gebremst und beschleunigt wurde, was den Spritverbrauch erhöht. Bei hohen Durchschnittsgeschwindigkeiten konnte vielleicht <em>gleichmäßiger</em> gefahren werden.
D.h., hier können viele Kovariablen das Bild verzerren.</p>
<p>Der Korrelationskoeffizient <span class="math inline">\(r\)</span> misst nur lineare Zusammenhänge, im Streudiagramm ist aber zu erkennen dass der Zusammenhang hier nicht linear ist - siehe auch die <code>TEBD</code>-Auswertung oben.</p>
</div>
</div>
<div id="your-turn" class="section level1" number="8">
<h1><span class="header-section-number">8</span> Your-Turn</h1>
<p>Analysieren Sie den Zusammenhang zwischen <code>consume</code> und einer weiteren Kovariable. Was stellen Sie fest?</p>
</div>
<div id="reproduzierbarkeit" class="section level1" number="9">
<h1><span class="header-section-number">9</span> Reproduzierbarkeit</h1>
<pre><code>## ─ Session info ───────────────────────────────────────────────────────────────────────────────────────────────────────
##  setting  value                       
##  version  R version 4.1.3 (2022-03-10)
##  os       macOS Big Sur/Monterey 10.16
##  system   x86_64, darwin17.0          
##  ui       X11                         
##  language (EN)                        
##  collate  en_US.UTF-8                 
##  ctype    en_US.UTF-8                 
##  tz       Europe/Berlin               
##  date     2022-05-02                  
## 
## ─ Packages ───────────────────────────────────────────────────────────────────────────────────────────────────────────
##  package      * version  date       lib source                                    
##  assertthat     0.2.1    2019-03-21 [1] CRAN (R 4.1.0)                            
##  backports      1.4.1    2021-12-13 [1] CRAN (R 4.1.0)                            
##  bayestestR   * 0.11.5   2021-10-30 [1] CRAN (R 4.1.0)                            
##  bit            4.0.4    2020-08-04 [2] CRAN (R 4.1.0)                            
##  bit64          4.0.5    2020-08-30 [2] CRAN (R 4.1.0)                            
##  blogdown       1.8      2022-02-16 [2] CRAN (R 4.1.2)                            
##  bookdown       0.24.2   2021-10-15 [1] Github (rstudio/bookdown@ba51c26)         
##  brio           1.1.3    2021-11-30 [1] CRAN (R 4.1.0)                            
##  broom          0.7.12   2022-01-28 [1] CRAN (R 4.1.2)                            
##  bslib          0.3.1    2021-10-06 [1] CRAN (R 4.1.0)                            
##  cachem         1.0.6    2021-08-19 [1] CRAN (R 4.1.0)                            
##  callr          3.7.0    2021-04-20 [1] CRAN (R 4.1.0)                            
##  cellranger     1.1.0    2016-07-27 [1] CRAN (R 4.1.0)                            
##  cli            3.2.0    2022-02-14 [1] CRAN (R 4.1.2)                            
##  coda           0.19-4   2020-09-30 [1] CRAN (R 4.1.0)                            
##  colorout     * 1.2-2    2022-01-04 [1] Github (jalvesaq/colorout@79931fd)        
##  colorspace     2.0-3    2022-02-21 [1] CRAN (R 4.1.2)                            
##  correlation  * 0.8.0.1  2022-04-21 [1] https://easystats.r-universe.dev (R 4.1.3)
##  crayon         1.5.1    2022-03-26 [1] CRAN (R 4.1.2)                            
##  curl           4.3.2    2021-06-23 [1] CRAN (R 4.1.0)                            
##  datawizard   * 0.4.0.9  2022-04-21 [1] https://easystats.r-universe.dev (R 4.1.3)
##  DBI            1.1.2    2021-12-20 [1] CRAN (R 4.1.0)                            
##  dbplyr         2.1.1    2021-04-06 [1] CRAN (R 4.1.0)                            
##  desc           1.4.0    2021-09-28 [1] CRAN (R 4.1.0)                            
##  devtools       2.4.3    2021-11-30 [1] CRAN (R 4.1.0)                            
##  digest         0.6.29   2021-12-01 [1] CRAN (R 4.1.0)                            
##  dplyr        * 1.0.8    2022-02-08 [1] CRAN (R 4.1.2)                            
##  easystats    * 0.4.3    2022-04-21 [1] https://easystats.r-universe.dev (R 4.1.3)
##  effectsize   * 0.6.0.1  2022-01-26 [1] CRAN (R 4.1.2)                            
##  ellipsis       0.3.2    2021-04-29 [1] CRAN (R 4.1.0)                            
##  emmeans        1.7.2    2022-01-04 [1] CRAN (R 4.1.2)                            
##  estimability   1.3      2018-02-11 [1] CRAN (R 4.1.0)                            
##  evaluate       0.14     2019-05-28 [1] CRAN (R 4.1.0)                            
##  fansi          1.0.3    2022-03-24 [1] CRAN (R 4.1.2)                            
##  farver         2.1.0    2021-02-28 [1] CRAN (R 4.1.0)                            
##  fastmap        1.1.0    2021-01-25 [2] CRAN (R 4.1.0)                            
##  forcats      * 0.5.1    2021-01-27 [1] CRAN (R 4.1.0)                            
##  fs             1.5.2    2021-12-08 [1] CRAN (R 4.1.0)                            
##  generics       0.1.2    2022-01-31 [1] CRAN (R 4.1.2)                            
##  ggplot2      * 3.3.5    2021-06-25 [2] CRAN (R 4.1.0)                            
##  glue           1.6.2    2022-02-24 [1] CRAN (R 4.1.2)                            
##  gtable         0.3.0    2019-03-25 [1] CRAN (R 4.1.0)                            
##  haven          2.4.3    2021-08-04 [1] CRAN (R 4.1.0)                            
##  highr          0.9      2021-04-16 [1] CRAN (R 4.1.0)                            
##  hms            1.1.1    2021-09-26 [1] CRAN (R 4.1.0)                            
##  htmltools      0.5.2    2021-08-25 [1] CRAN (R 4.1.0)                            
##  httr           1.4.2    2020-07-20 [1] CRAN (R 4.1.0)                            
##  insight      * 0.17.0.4 2022-04-20 [1] https://easystats.r-universe.dev (R 4.1.3)
##  jquerylib      0.1.4    2021-04-26 [1] CRAN (R 4.1.0)                            
##  jsonlite       1.7.3    2022-01-17 [1] CRAN (R 4.1.2)                            
##  knitr          1.37     2021-12-16 [1] CRAN (R 4.1.0)                            
##  labeling       0.4.2    2020-10-20 [1] CRAN (R 4.1.0)                            
##  lattice        0.20-45  2021-09-22 [2] CRAN (R 4.1.3)                            
##  lifecycle      1.0.1    2021-09-24 [1] CRAN (R 4.1.0)                            
##  lubridate      1.8.0    2021-10-07 [1] CRAN (R 4.1.0)                            
##  magrittr       2.0.3    2022-03-30 [1] CRAN (R 4.1.2)                            
##  Matrix         1.4-0    2021-12-08 [2] CRAN (R 4.1.3)                            
##  memoise        2.0.0    2021-01-26 [2] CRAN (R 4.1.0)                            
##  mgcv           1.8-39   2022-02-24 [2] CRAN (R 4.1.3)                            
##  modelbased   * 0.8.0    2022-04-12 [1] https://easystats.r-universe.dev (R 4.1.3)
##  modelr         0.1.8    2020-05-19 [1] CRAN (R 4.1.0)                            
##  munsell        0.5.0    2018-06-12 [1] CRAN (R 4.1.0)                            
##  mvtnorm        1.1-3    2021-10-08 [1] CRAN (R 4.1.0)                            
##  nlme           3.1-155  2022-01-16 [2] CRAN (R 4.1.3)                            
##  parameters   * 0.17.0.9 2022-04-20 [1] https://easystats.r-universe.dev (R 4.1.3)
##  performance  * 0.9.0.2  2022-04-20 [1] https://easystats.r-universe.dev (R 4.1.3)
##  pillar         1.7.0    2022-02-01 [1] CRAN (R 4.1.2)                            
##  pkgbuild       1.2.0    2020-12-15 [2] CRAN (R 4.1.0)                            
##  pkgconfig      2.0.3    2019-09-22 [1] CRAN (R 4.1.0)                            
##  pkgload        1.2.4    2021-11-30 [1] CRAN (R 4.1.0)                            
##  prettyunits    1.1.1    2020-01-24 [1] CRAN (R 4.1.0)                            
##  processx       3.5.2    2021-04-30 [1] CRAN (R 4.1.0)                            
##  ps             1.6.0    2021-02-28 [1] CRAN (R 4.1.0)                            
##  purrr        * 0.3.4    2020-04-17 [1] CRAN (R 4.1.0)                            
##  R6             2.5.1    2021-08-19 [1] CRAN (R 4.1.0)                            
##  Rcpp           1.0.8.3  2022-03-17 [1] CRAN (R 4.1.2)                            
##  readr        * 2.1.2    2022-01-30 [1] CRAN (R 4.1.2)                            
##  readxl         1.3.1    2019-03-13 [1] CRAN (R 4.1.0)                            
##  remotes        2.4.0    2021-06-02 [2] CRAN (R 4.1.0)                            
##  report       * 0.5.1.1  2022-04-11 [1] https://easystats.r-universe.dev (R 4.1.3)
##  reprex         2.0.1    2021-08-05 [1] CRAN (R 4.1.0)                            
##  rlang          1.0.2    2022-03-04 [1] CRAN (R 4.1.2)                            
##  rmarkdown      2.11     2021-09-14 [1] CRAN (R 4.1.0)                            
##  rprojroot      2.0.2    2020-11-15 [2] CRAN (R 4.1.0)                            
##  rstudioapi     0.13     2020-11-12 [1] CRAN (R 4.1.0)                            
##  rvest          1.0.2    2021-10-16 [1] CRAN (R 4.1.0)                            
##  sass           0.4.0    2021-05-12 [1] CRAN (R 4.1.0)                            
##  scales         1.2.0    2022-04-13 [1] CRAN (R 4.1.3)                            
##  see          * 0.7.0.1  2022-04-12 [1] https://easystats.r-universe.dev (R 4.1.3)
##  sessioninfo    1.1.1    2018-11-05 [2] CRAN (R 4.1.0)                            
##  stringi        1.7.6    2021-11-29 [1] CRAN (R 4.1.0)                            
##  stringr      * 1.4.0    2019-02-10 [1] CRAN (R 4.1.0)                            
##  testthat       3.1.2    2022-01-20 [1] CRAN (R 4.1.2)                            
##  tibble       * 3.1.6    2021-11-07 [1] CRAN (R 4.1.0)                            
##  tidyr        * 1.2.0    2022-02-01 [1] CRAN (R 4.1.2)                            
##  tidyselect     1.1.2    2022-02-21 [1] CRAN (R 4.1.2)                            
##  tidyverse    * 1.3.1    2021-04-15 [1] CRAN (R 4.1.0)                            
##  tzdb           0.1.2    2021-07-20 [2] CRAN (R 4.1.0)                            
##  usethis        2.0.1    2021-02-10 [2] CRAN (R 4.1.0)                            
##  utf8           1.2.2    2021-07-24 [1] CRAN (R 4.1.0)                            
##  vctrs          0.4.0    2022-03-30 [1] CRAN (R 4.1.2)                            
##  vroom          1.5.7    2021-11-30 [1] CRAN (R 4.1.0)                            
##  withr          2.5.0    2022-03-03 [1] CRAN (R 4.1.2)                            
##  xfun           0.29     2021-12-14 [1] CRAN (R 4.1.0)                            
##  xml2           1.3.3    2021-11-30 [1] CRAN (R 4.1.0)                            
##  xtable         1.8-4    2019-04-21 [1] CRAN (R 4.1.0)                            
##  yaml           2.2.2    2022-01-25 [1] CRAN (R 4.1.2)                            
## 
## [1] /Users/sebastiansaueruser/Library/R/x86_64/4.1/library
## [2] /Library/Frameworks/R.framework/Versions/4.1/Resources/library</code></pre>
</div>

    </div>


  </article>




  
<section id="comments">
  <div id="disqus_thread"></div>
  <script>
  var disqus_config = function () {
  
  };
  (function() {
    var inIFrame = function() {
      var iframe = true;
      try { iframe = window.self !== window.top; } catch (e) {}
      return iframe;
    };
    if (inIFrame()) return;
    var d = document, s = d.createElement('script');
    s.src = '//https-data-se-netlify-com.disqus.com/embed.js'; s.async = true;
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
  })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>




</main>

      <footer class="footer">
        <ul class="footer-links">
          <li>
            <a href="/index.xml" type="application/rss+xml" target="_blank">RSS feed</a>
          </li>
          <li>
            <a href="https://gohugo.io/" class="footer-links-kudos">Made with <img src="/images/hugo-logo.png" alt="Img link to Hugo website" width="22" height="22"></a>
          </li>
        </ul>
      </footer>

    </div>
    



<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>



<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/r.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/yaml.min.js"></script>
<script>hljs.configure({languages: []}); hljs.initHighlightingOnLoad();</script>



    
<script src="/js/math-code.js"></script>
<script async src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"></script>


    
  </body>
</html>

