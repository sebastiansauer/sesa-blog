<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Hugo 0.101.0" />


<title>ModernDive, Chapter 05 - Exercises/Aufgaben (in Deutsch) - sesa blog</title>
<meta property="og:title" content="ModernDive, Chapter 05 - Exercises/Aufgaben (in Deutsch) - sesa blog">


  <link href='https://data-se.netlify.app/favicon.ico' rel='icon' type='image/x-icon'/>



  








<link href='//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css' rel='stylesheet' type='text/css' />



<link rel="stylesheet" href="/css/fonts.css" media="all">
<link rel="stylesheet" href="/css/main.css" media="all">



  </head>
  <body>
    <div class="wrapper">
      <header class="header">
        <nav class="nav">
  <a href="/" class="nav-logo">
    <img src="/images/logo-data-se.png"
         width="50"
         height="50"
         alt="Logo">
  </a>

  <ul class="nav-links">
    
    <li><a href="/about/">About</a></li>
    
    <li><a href="/privacy/">Data privacy</a></li>
    
    <li><a href="/tags/">Tags</a></li>
    
  </ul>
</nav>

      </header>



<main class="content" role="main">

    <h1 class="article-title">ModernDive, Chapter 05 - Exercises/Aufgaben (in Deutsch)</h1>


    <span class="article-meta">
      Sebastian Sauer / 11 mins read <br>
    </span>



    
    <span class="article-date">2020-12-02</span>
    

    <div class="article-content">
      
<script src="https://data-se.netlify.app/2020/12/02/moderndive-chapter-05-exercises-aufgaben-in-deutsch/index_files/header-attrs/header-attrs.js"></script>

<div id="TOC">
<ul>
<li><a href="#überblick"><span class="toc-section-number">0.1</span> Überblick</a></li>
<li><a href="#stärkster-univariater-prädiktor-der-dozentenbeurteilung"><span class="toc-section-number">1</span> Stärkster univariater Prädiktor der Dozentenbeurteilung</a>
<ul>
<li><a href="#aufgabe"><span class="toc-section-number">1.1</span> Aufgabe</a></li>
<li><a href="#hilfe"><span class="toc-section-number">1.2</span> Hilfe</a></li>
<li><a href="#hinweise"><span class="toc-section-number">1.3</span> Hinweise</a></li>
<li><a href="#lösung"><span class="toc-section-number">1.4</span> Lösung</a></li>
<li><a href="#für-fortgeschrittene"><span class="toc-section-number">1.5</span> Für Fortgeschrittene</a></li>
</ul></li>
<li><a href="#r2-für-univariate-regression-von-score-auf-den-stärksten-prädiktor"><span class="toc-section-number">2</span> <span class="math inline">\(R^2\)</span> für univariate Regression von <code>score</code> auf den stärksten Prädiktor</a>
<ul>
<li><a href="#aufgabe-1"><span class="toc-section-number">2.1</span> Aufgabe</a></li>
<li><a href="#lösung-1"><span class="toc-section-number">2.2</span> Lösung</a></li>
</ul></li>
<li><a href="#visualisieren-sie-die-univariate-regression"><span class="toc-section-number">3</span> Visualisieren Sie die univariate Regression</a>
<ul>
<li><a href="#aufgabe-2"><span class="toc-section-number">3.1</span> Aufgabe</a></li>
<li><a href="#lösung-2"><span class="toc-section-number">3.2</span> Lösung</a></li>
<li><a href="#variante"><span class="toc-section-number">3.3</span> Variante</a></li>
</ul></li>
<li><a href="#vergleich-zur-korrelation"><span class="toc-section-number">4</span> Vergleich zur Korrelation</a>
<ul>
<li><a href="#aufgabe-3"><span class="toc-section-number">4.1</span> Aufgabe</a></li>
<li><a href="#lösung-3"><span class="toc-section-number">4.2</span> Lösung</a></li>
</ul></li>
<li><a href="#standardisierte-prädiktoren"><span class="toc-section-number">5</span> Standardisierte Prädiktoren</a>
<ul>
<li><a href="#aufgabe-4"><span class="toc-section-number">5.1</span> Aufgabe</a></li>
<li><a href="#lösung-4"><span class="toc-section-number">5.2</span> Lösung</a></li>
</ul></li>
<li><a href="#lebenserwartung-nach-kontinent-berechnen"><span class="toc-section-number">6</span> Lebenserwartung nach Kontinent berechnen</a>
<ul>
<li><a href="#aufgabe-5"><span class="toc-section-number">6.1</span> Aufgabe</a></li>
<li><a href="#lösung-5"><span class="toc-section-number">6.2</span> Lösung</a></li>
<li><a href="#hinweis"><span class="toc-section-number">6.3</span> Hinweis</a></li>
</ul></li>
<li><a href="#lebenserwartung-nach-kontinent-visualisieren"><span class="toc-section-number">7</span> Lebenserwartung nach Kontinent visualisieren</a>
<ul>
<li><a href="#aufgabe-6"><span class="toc-section-number">7.1</span> Aufgabe</a></li>
<li><a href="#lösung-6"><span class="toc-section-number">7.2</span> Lösung</a></li>
</ul></li>
<li><a href="#lebenserwartung-nach-kontinent-und-regression"><span class="toc-section-number">8</span> Lebenserwartung nach Kontinent und Regression</a>
<ul>
<li><a href="#aufgabe-7"><span class="toc-section-number">8.1</span> Aufgabe</a></li>
<li><a href="#lösung-7"><span class="toc-section-number">8.2</span> Lösung</a></li>
</ul></li>
<li><a href="#berechnung-der-lebenswertung-für-einen-spezifischen-kontinent"><span class="toc-section-number">9</span> Berechnung der Lebenswertung für einen spezifischen Kontinent</a>
<ul>
<li><a href="#aufgabe-8"><span class="toc-section-number">9.1</span> Aufgabe</a></li>
<li><a href="#lösung-8"><span class="toc-section-number">9.2</span> Lösung</a></li>
</ul></li>
<li><a href="#bedeutung-der-residuen-in-der-regressionsanalyse"><span class="toc-section-number">10</span> Bedeutung der Residuen in der Regressionsanalyse</a>
<ul>
<li><a href="#aufgabe-9"><span class="toc-section-number">10.1</span> Aufgabe</a></li>
<li><a href="#lösung-9"><span class="toc-section-number">10.2</span> Lösung</a></li>
</ul></li>
<li><a href="#konfundierung"><span class="toc-section-number">11</span> Konfundierung</a>
<ul>
<li><a href="#aufgabe-10"><span class="toc-section-number">11.1</span> Aufgabe</a></li>
<li><a href="#lösung-10"><span class="toc-section-number">11.2</span> Lösung</a></li>
</ul></li>
<li><a href="#optimierungskriterium-der-regression"><span class="toc-section-number">12</span> Optimierungskriterium der Regression</a>
<ul>
<li><a href="#aufgabe-11"><span class="toc-section-number">12.1</span> Aufgabe</a></li>
<li><a href="#lösung-11"><span class="toc-section-number">12.2</span> Lösung</a></li>
<li><a href="#hinweis-1"><span class="toc-section-number">12.3</span> Hinweis</a></li>
</ul></li>
</ul>
</div>

<div id="überblick" class="section level2" number="0.1">
<h2><span class="header-section-number">0.1</span> Überblick</h2>
<p>Diese Aufgaben beziehen sich auf <a href="https://moderndive.com/5-regression.html">Kapitel 5</a> aus dem Buch ModernDive.</p>
<pre class="r"><code>library(tidyverse)  # Datenjudo
library(moderndive)  # Daten
library(gapminder)  # Daten</code></pre>
<p>Als Datensätze werden verwendet <code>evals</code> und <code>gapminder</code>:</p>
<pre class="r"><code>data(&quot;evals&quot;)
data(&quot;gapminder&quot;)</code></pre>
</div>
<div id="stärkster-univariater-prädiktor-der-dozentenbeurteilung" class="section level1" number="1">
<h1><span class="header-section-number">1</span> Stärkster univariater Prädiktor der Dozentenbeurteilung</h1>
<div id="aufgabe" class="section level2" number="1.1">
<h2><span class="header-section-number">1.1</span> Aufgabe</h2>
<p>Identifizieren Sie den stärksten (univariaten) Prädiktor für die (Höhe der) Dozentenbeurteilung! (Datensatz <code>evals</code> aus dem Paket <code>modernDive</code>)</p>
</div>
<div id="hilfe" class="section level2" number="1.2">
<h2><span class="header-section-number">1.2</span> Hilfe</h2>
<p>Hilfe zur Tabelle <code>evals</code> bekommt man so:</p>
<pre class="r"><code>help(evals)</code></pre>
</div>
<div id="hinweise" class="section level2" number="1.3">
<h2><span class="header-section-number">1.3</span> Hinweise</h2>
<p>Ein möglicher Start ist: Berechnen Sie die Korrelationen der möglichen Prädiktoren (UV) mit dem Kriterium <code>score</code> (AV, Zielvariable)!</p>
<p>Unsere Forschungsfrage lautet also:</p>
<p><em>Welche Variablenausprägungen gehen mit einer guten Dozentenbeurteilung einher?</em></p>
<p>Anstelle von “gehen einher” könnte man sagen “sind korreliert mit” oder “sind assoziiert mit” oder “sind statistisch abhängig voneinander”. Geht man von einer Kausalbeziehung aus, könnte man sagen “welche Variable hat den größten Einfluss auf die Dozentenbeurteilung?”. Allerdings braucht man für die vollmundinge Behauptung einer Kausalbeziehung schon gute Argumente.</p>
<p>Wir suchen also die “wichtigste” UV!</p>
<p>Mit “univariat” ist gemeint, dass wir nur Modelle in Betracht ziehen, in denen es <em>eine</em> UV gibt.</p>
<p>Schauen wir uns die ersten paar Zeilen auf <code>evals</code> an:</p>
<pre class="r"><code>head(evals)</code></pre>
<pre><code>## # A tibble: 6 x 14
##      ID prof_ID score   age bty_avg gender ethnicity language rank  pic_outfit
##   &lt;int&gt;   &lt;int&gt; &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt; &lt;fct&gt;  &lt;fct&gt;     &lt;fct&gt;    &lt;fct&gt; &lt;fct&gt;     
## 1     1       1   4.7    36       5 female minority  english  tenu… not formal
## 2     2       1   4.1    36       5 female minority  english  tenu… not formal
## 3     3       1   3.9    36       5 female minority  english  tenu… not formal
## 4     4       1   4.8    36       5 female minority  english  tenu… not formal
## 5     5       2   4.6    59       3 male   not mino… english  tenu… not formal
## 6     6       2   4.3    59       3 male   not mino… english  tenu… not formal
## # … with 4 more variables: pic_color &lt;fct&gt;, cls_did_eval &lt;int&gt;,
## #   cls_students &lt;int&gt;, cls_level &lt;fct&gt;</code></pre>
<p>Um herauszufinden, welche Variable mit der AV <code>score</code> positiv einhergeht, kann man sich ein Streudiagramm ausgeben und zwar für jeden (numerischen) Prädiktor:</p>
<pre class="r"><code>evals %&gt;% 
  ggplot() +
  aes(x = cls_students, y = score) +
  geom_point()</code></pre>
<p><img src="https://data-se.netlify.app/2020/12/02/moderndive-chapter-05-exercises-aufgaben-in-deutsch/index_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<pre class="r"><code>evals %&gt;% 
  ggplot() +
  aes(x = bty_avg, y = score) +
  geom_point()</code></pre>
<p><img src="https://data-se.netlify.app/2020/12/02/moderndive-chapter-05-exercises-aufgaben-in-deutsch/index_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<p>Hm, die Schönheit einer Lehrkraft könnte eine (kleine) Rolle spielen.</p>
</div>
<div id="lösung" class="section level2" number="1.4">
<h2><span class="header-section-number">1.4</span> Lösung</h2>
<p>Man kann die Korrelation jedes (numerischen) Prädiktors berechnen und dann die höchste Korrelation ablesen:</p>
<pre class="r"><code>evals %&gt;% 
  summarise(r_bty = cor(score, bty_avg),
            r_ge = cor(score, age))</code></pre>
<pre><code>## # A tibble: 1 x 2
##   r_bty   r_ge
##   &lt;dbl&gt;  &lt;dbl&gt;
## 1 0.187 -0.107</code></pre>
<p>Und so weiter.</p>
<p>Aber was machen wir mit den nicht-numerischen Werten? Die kann man nicht (direkt) korrelieren. Lassen wir die mal außen vor.</p>
</div>
<div id="für-fortgeschrittene" class="section level2" number="1.5">
<h2><span class="header-section-number">1.5</span> Für Fortgeschrittene</h2>
<p>So geht es komfortabler:</p>
<pre class="r"><code>library(corrr)
evals %&gt;% 
  select(where(is.numeric)) %&gt;%   # nimm die Spalten, wo eine numerische Spalte ist
  select(-c(ID, prof_ID)) %&gt;%  # Prof_ID und ID brauchen wir nicht
  correlate() %&gt;%  # korrelieren
  focus(score) %&gt;%  # Fokus auf `score`
  arrange()  # sortieren</code></pre>
<pre><code>## 
## Correlation method: &#39;pearson&#39;
## Missing treated using: &#39;pairwise.complete.obs&#39;</code></pre>
<pre><code>## # A tibble: 4 x 2
##   term           score
##   &lt;chr&gt;          &lt;dbl&gt;
## 1 age          -0.107 
## 2 bty_avg       0.187 
## 3 cls_did_eval  0.0628
## 4 cls_students  0.0260</code></pre>
</div>
</div>
<div id="r2-für-univariate-regression-von-score-auf-den-stärksten-prädiktor" class="section level1" number="2">
<h1><span class="header-section-number">2</span> <span class="math inline">\(R^2\)</span> für univariate Regression von <code>score</code> auf den stärksten Prädiktor</h1>
<div id="aufgabe-1" class="section level2" number="2.1">
<h2><span class="header-section-number">2.1</span> Aufgabe</h2>
<p>Führen Sie eine einfache (univariate) Regression von <code>score</code> (AV) zurück auf den stärksten Prädiktor. Wenn Sie den stärksten Prädiktor nicht gefunden haben, wählen Sie einen beliebigen Prädiktor. Geben Sie das <span class="math inline">\(R^2\)</span> an.</p>
</div>
<div id="lösung-1" class="section level2" number="2.2">
<h2><span class="header-section-number">2.2</span> Lösung</h2>
<pre class="r"><code>lm1 &lt;- lm(score ~ bty_avg, data = evals)
summary(lm1)</code></pre>
<pre><code>## 
## Call:
## lm(formula = score ~ bty_avg, data = evals)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -1.9246 -0.3690  0.1420  0.3977  0.9309 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)  3.88034    0.07614   50.96  &lt; 2e-16 ***
## bty_avg      0.06664    0.01629    4.09 5.08e-05 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 0.5348 on 461 degrees of freedom
## Multiple R-squared:  0.03502,    Adjusted R-squared:  0.03293 
## F-statistic: 16.73 on 1 and 461 DF,  p-value: 5.083e-05</code></pre>
<p>Das <span class="math inline">\(R^2\)</span> liegt bei etwa 3%.</p>
</div>
</div>
<div id="visualisieren-sie-die-univariate-regression" class="section level1" number="3">
<h1><span class="header-section-number">3</span> Visualisieren Sie die univariate Regression</h1>
<div id="aufgabe-2" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> Aufgabe</h2>
<p>Visualisieren Sie die Regression aus der letzter Aufgabe anhand eines geeigneten Diagramms. Begründen Sie Ihre Wahl. Wenn Sie die letzte Aufgabe nicht gelöst haben, wählen Sie eine beliebige Regression.</p>
</div>
<div id="lösung-2" class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> Lösung</h2>
<pre class="r"><code>evals %&gt;% 
  ggplot(aes(x = bty_avg, y = score)) +
  geom_point() +
  geom_smooth(method = &quot;lm&quot;)</code></pre>
<pre><code>## `geom_smooth()` using formula &#39;y ~ x&#39;</code></pre>
<p><img src="https://data-se.netlify.app/2020/12/02/moderndive-chapter-05-exercises-aufgaben-in-deutsch/index_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
</div>
<div id="variante" class="section level2" number="3.3">
<h2><span class="header-section-number">3.3</span> Variante</h2>
<pre class="r"><code>evals %&gt;% 
  ggplot(aes(x = bty_avg, y = score)) +
  geom_density_2d() +  # geom_hex()
  geom_smooth(method = &quot;lm&quot;)</code></pre>
<pre><code>## `geom_smooth()` using formula &#39;y ~ x&#39;</code></pre>
<p><img src="https://data-se.netlify.app/2020/12/02/moderndive-chapter-05-exercises-aufgaben-in-deutsch/index_files/figure-html/unnamed-chunk-11-1.png" width="672" /></p>
</div>
</div>
<div id="vergleich-zur-korrelation" class="section level1" number="4">
<h1><span class="header-section-number">4</span> Vergleich zur Korrelation</h1>
<div id="aufgabe-3" class="section level2" number="4.1">
<h2><span class="header-section-number">4.1</span> Aufgabe</h2>
<p>Was ist der Unterschied zwischen den folgenden drei Kennwerten:</p>
<ol style="list-style-type: decimal">
<li><span class="math inline">\(R^2\)</span></li>
<li><span class="math inline">\(\beta_1\)</span></li>
<li><span class="math inline">\(r\)</span></li>
</ol>
<p>Hinweis: Beziehen Sie sich auf den Kontext der Regressionsanalyse (lineare Modelle).</p>
</div>
<div id="lösung-3" class="section level2" number="4.2">
<h2><span class="header-section-number">4.2</span> Lösung</h2>
<ol style="list-style-type: decimal">
<li><span class="math inline">\(R^2\)</span> gibt die Höhe des durch das Regressionsmodell erklärten Varianzanteils an.</li>
<li><span class="math inline">\(\beta_1\)</span> gibt die Steigung der Regressionsgeraden an, <span class="math inline">\(\beta_0\)</span> gibt den Wert des Achsenabschnitts an.</li>
<li><span class="math inline">\(r\)</span> gibt die Höhe des Korrelationskoeffizienten wieder. Bei univariaten Regressionsmodellen ist <span class="math inline">\(R^2\)</span> das Quadrat von <span class="math inline">\(r\)</span>.</li>
</ol>
</div>
</div>
<div id="standardisierte-prädiktoren" class="section level1" number="5">
<h1><span class="header-section-number">5</span> Standardisierte Prädiktoren</h1>
<div id="aufgabe-4" class="section level2" number="5.1">
<h2><span class="header-section-number">5.1</span> Aufgabe</h2>
<p>Führen Sie eine z-Standardisierung des Prädiktors (UV) und des Kriteriums (AV) durch. Mit diesen transformierten Variablen wiederholen Sie dann die Regression. Diskutieren Sie die Veränderung.</p>
</div>
<div id="lösung-4" class="section level2" number="5.2">
<h2><span class="header-section-number">5.2</span> Lösung</h2>
<pre class="r"><code>evals %&gt;% 
  mutate(bty_avg_z = ((bty_avg - mean(bty_avg)) / sd(bty_avg)),
         score_z = ((score - mean(score)) / sd(score))) -&gt; evals</code></pre>
<pre class="r"><code>lm2 &lt;- lm(score_z ~ bty_avg_z, data = evals)
summary(lm2)</code></pre>
<pre><code>## 
## Call:
## lm(formula = score_z ~ bty_avg_z, data = evals)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -3.5388 -0.6785  0.2611  0.7312  1.7116 
## 
## Coefficients:
##              Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept) 5.371e-16  4.570e-02    0.00        1    
## bty_avg_z   1.871e-01  4.575e-02    4.09 5.08e-05 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 0.9834 on 461 degrees of freedom
## Multiple R-squared:  0.03502,    Adjusted R-squared:  0.03293 
## F-statistic: 16.73 on 1 and 461 DF,  p-value: 5.083e-05</code></pre>
<p>Die Werte von <span class="math inline">\(\beta_0\)</span> und <span class="math inline">\(\beta_1\)</span> haben sich geändert. <span class="math inline">\(R^2\)</span> ist gleich geblieben.</p>
<p>Das Diagramm sieht fast genau aus:</p>
<pre class="r"><code>evals %&gt;% 
  ggplot(aes(x = bty_avg_z, y = score_z)) +
  geom_point() +
  geom_smooth(method = &quot;lm&quot;)</code></pre>
<pre><code>## `geom_smooth()` using formula &#39;y ~ x&#39;</code></pre>
<p><img src="https://data-se.netlify.app/2020/12/02/moderndive-chapter-05-exercises-aufgaben-in-deutsch/index_files/figure-html/unnamed-chunk-14-1.png" width="672" /></p>
</div>
</div>
<div id="lebenserwartung-nach-kontinent-berechnen" class="section level1" number="6">
<h1><span class="header-section-number">6</span> Lebenserwartung nach Kontinent berechnen</h1>
<div id="aufgabe-5" class="section level2" number="6.1">
<h2><span class="header-section-number">6.1</span> Aufgabe</h2>
<p>Fassen Sie die mittlere Lebenserwartungen nach Kontinent zusammen.</p>
</div>
<div id="lösung-5" class="section level2" number="6.2">
<h2><span class="header-section-number">6.2</span> Lösung</h2>
<p>Daten laden:</p>
<pre class="r"><code>data(&quot;gapminder&quot;)</code></pre>
<pre class="r"><code>gapminder %&gt;% 
  group_by(continent) %&gt;% 
  summarise(lifeExp = mean(lifeExp))</code></pre>
<pre><code>## # A tibble: 5 x 2
##   continent lifeExp
## * &lt;fct&gt;       &lt;dbl&gt;
## 1 Africa       48.9
## 2 Americas     64.7
## 3 Asia         60.1
## 4 Europe       71.9
## 5 Oceania      74.3</code></pre>
</div>
<div id="hinweis" class="section level2" number="6.3">
<h2><span class="header-section-number">6.3</span> Hinweis</h2>
<p>Sinnvoller wäre es, vorher nach einem Jahr zu filtern, entsprechend dem Vorgehen im Buch.</p>
<pre class="r"><code>gapminder %&gt;%
  filter(year == 2007) -&gt; gapminder_2007</code></pre>
<pre class="r"><code>gapminder_2007 %&gt;% 
  group_by(continent) %&gt;% 
  summarise(lifeExp = mean(lifeExp))</code></pre>
<pre><code>## # A tibble: 5 x 2
##   continent lifeExp
## * &lt;fct&gt;       &lt;dbl&gt;
## 1 Africa       54.8
## 2 Americas     73.6
## 3 Asia         70.7
## 4 Europe       77.6
## 5 Oceania      80.7</code></pre>
<p>Speichern wir die zusammengefassten Statistiken für etwaige spätere Verwendung:</p>
<pre class="r"><code>gapminder_2007 %&gt;%
  group_by(continent) %&gt;% 
  summarise(lifeExp_avg = mean(lifeExp, na.rm = TRUE),
            lifeExp_sd = sd(lifeExp, na.rm = TRUE)) -&gt; gapminder_2007_summary</code></pre>
</div>
</div>
<div id="lebenserwartung-nach-kontinent-visualisieren" class="section level1" number="7">
<h1><span class="header-section-number">7</span> Lebenserwartung nach Kontinent visualisieren</h1>
<div id="aufgabe-6" class="section level2" number="7.1">
<h2><span class="header-section-number">7.1</span> Aufgabe</h2>
<p>Visualisieren Sie die Lebenserwartung nach Kontinent mit einem geeigneten Diagramm. Begründen Sie Ihre Wahl.</p>
</div>
<div id="lösung-6" class="section level2" number="7.2">
<h2><span class="header-section-number">7.2</span> Lösung</h2>
<pre class="r"><code>gapminder %&gt;% 
  filter(year == 2007) %&gt;% 
  ggplot() +
  aes(x = continent, y = lifeExp) +
  geom_boxplot()</code></pre>
<p><img src="https://data-se.netlify.app/2020/12/02/moderndive-chapter-05-exercises-aufgaben-in-deutsch/index_files/figure-html/unnamed-chunk-20-1.png" width="672" /></p>
<p>Da die Boxplots aber Mediane anstelle von Mittelwerten zeigen, wäre folgendes Vorgehen sinvoller:</p>
<pre class="r"><code>gapminder_2007_summary %&gt;% 
  ggplot() +
  aes(x = continent, y = lifeExp_avg) +
  geom_point() +
  geom_errorbar(aes(ymin = lifeExp_avg - lifeExp_avg + 2*lifeExp_sd,
                ymax = lifeExp_avg + lifeExp_avg + 2*lifeExp_sd))</code></pre>
<p><img src="https://data-se.netlify.app/2020/12/02/moderndive-chapter-05-exercises-aufgaben-in-deutsch/index_files/figure-html/unnamed-chunk-21-1.png" width="672" /></p>
<p>Oder so:</p>
<pre class="r"><code>gapminder %&gt;% 
  filter(year == 2007) %&gt;% 
  ggplot() +
  aes(x = continent, y = lifeExp) +
  geom_boxplot() +
  geom_point(data = gapminder_2007_summary, 
             aes(y = lifeExp_avg),
             color = &quot;red&quot;,
             size = 5,
             alpha = .7) </code></pre>
<p><img src="https://data-se.netlify.app/2020/12/02/moderndive-chapter-05-exercises-aufgaben-in-deutsch/index_files/figure-html/unnamed-chunk-22-1.png" width="672" /></p>
</div>
</div>
<div id="lebenserwartung-nach-kontinent-und-regression" class="section level1" number="8">
<h1><span class="header-section-number">8</span> Lebenserwartung nach Kontinent und Regression</h1>
<div id="aufgabe-7" class="section level2" number="8.1">
<h2><span class="header-section-number">8.1</span> Aufgabe</h2>
<p>Führen Sie eine Regression mit Lebenserwartung als AV und Kontinent als UV durch. Vergleichen Sie die Regressionskoeffizienten mit den Mittelwerten aus den vorherigen Aufgaben. Was fällt Ihnen auf? (Wenn Sie die Mittelwerte nicht berechnet haben, schlagen Sie sie im Buch nach.)</p>
</div>
<div id="lösung-7" class="section level2" number="8.2">
<h2><span class="header-section-number">8.2</span> Lösung</h2>
<pre class="r"><code>lm3 &lt;- lm(lifeExp ~  continent, data = gapminder_2007)
summary(lm3)</code></pre>
<pre><code>## 
## Call:
## lm(formula = lifeExp ~ continent, data = gapminder_2007)
## 
## Residuals:
##      Min       1Q   Median       3Q      Max 
## -26.9005  -4.0399   0.2565   3.3840  21.6360 
## 
## Coefficients:
##                   Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)         54.806      1.025  53.446  &lt; 2e-16 ***
## continentAmericas   18.802      1.800  10.448  &lt; 2e-16 ***
## continentAsia       15.922      1.646   9.675  &lt; 2e-16 ***
## continentEurope     22.843      1.695  13.474  &lt; 2e-16 ***
## continentOceania    25.913      5.328   4.863 3.12e-06 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 7.395 on 137 degrees of freedom
## Multiple R-squared:  0.6355, Adjusted R-squared:  0.6249 
## F-statistic: 59.71 on 4 and 137 DF,  p-value: &lt; 2.2e-16</code></pre>
<p>Die <code>Estimate</code>-Werte entsprechen genau den Mittelwerten pro Kontinenten bzw. den Unterschieden der Kontinente im Vergleich zum “Referenzkontinent”, Afrika.</p>
</div>
</div>
<div id="berechnung-der-lebenswertung-für-einen-spezifischen-kontinent" class="section level1" number="9">
<h1><span class="header-section-number">9</span> Berechnung der Lebenswertung für einen spezifischen Kontinent</h1>
<div id="aufgabe-8" class="section level2" number="9.1">
<h2><span class="header-section-number">9.1</span> Aufgabe</h2>
<p>Nutzen Sie die Ausgabe der Regressionsanalyse (<code>lm()</code>), um die Rechenvorschrift der Lebenserwartung für</p>
<ul>
<li>Afrika</li>
<li>Europa</li>
</ul>
<p>aufzuschreiben.</p>
</div>
<div id="lösung-8" class="section level2" number="9.2">
<h2><span class="header-section-number">9.2</span> Lösung</h2>
<p><code>lifeExp_Africa = 54.806</code></p>
<p><code>lifeExp_Europe = 65.806 + 22.843</code></p>
</div>
</div>
<div id="bedeutung-der-residuen-in-der-regressionsanalyse" class="section level1" number="10">
<h1><span class="header-section-number">10</span> Bedeutung der Residuen in der Regressionsanalyse</h1>
<div id="aufgabe-9" class="section level2" number="10.1">
<h2><span class="header-section-number">10.1</span> Aufgabe</h2>
<p>Erläutern Sie:</p>
<ol style="list-style-type: decimal">
<li>Was gibt diese Formel wieder: <span class="math inline">\(\sum (y - \hat{y})\)</span></li>
<li>Welchen Effekt hat es, wenn man die Formel wie folgt verändert: <span class="math inline">\(\sum (y - \hat{y})^2\)</span>?</li>
<li>Wie nennt man die Größe <span class="math inline">\(y - \hat{y}\)</span>?</li>
</ol>
</div>
<div id="lösung-9" class="section level2" number="10.2">
<h2><span class="header-section-number">10.2</span> Lösung</h2>
<ol style="list-style-type: decimal">
<li>Der Ausdruck <span class="math inline">\(\sum (y - \hat{y})\)</span> gibt die Summe der Residuen wieder. (Diese summieren sich zu Null auf.)</li>
<li>Damit werden die Quadrate der Residuen aufaddiert; das Vorzeichen verliert dabei die Bedeutung.</li>
<li>Der Ausdruck <span class="math inline">\(y - \hat{y}\)</span> definiert das Residuum, <span class="math inline">\(e\)</span>.</li>
</ol>
</div>
</div>
<div id="konfundierung" class="section level1" number="11">
<h1><span class="header-section-number">11</span> Konfundierung</h1>
<div id="aufgabe-10" class="section level2" number="11.1">
<h2><span class="header-section-number">11.1</span> Aufgabe</h2>
<p>Geben Sie ein Beispiel für eine Konfundierung (confounding) aus Ihrem persönlichen Umfeld!</p>
</div>
<div id="lösung-10" class="section level2" number="11.2">
<h2><span class="header-section-number">11.2</span> Lösung</h2>
<p><em>Freude am Unterricht</em> (F) und <em>Klausurerfolg</em> (E) seien korreliert. In Wahrheit sei <em>Lernzeit</em> (L) die konfundierende Variable.</p>
</div>
</div>
<div id="optimierungskriterium-der-regression" class="section level1" number="12">
<h1><span class="header-section-number">12</span> Optimierungskriterium der Regression</h1>
<div id="aufgabe-11" class="section level2" number="12.1">
<h2><span class="header-section-number">12.1</span> Aufgabe</h2>
<p>Die Regression “sucht” nach der am besten passenden Geraden (best fitting line).</p>
<ol style="list-style-type: decimal">
<li>Welcher Ausdruck wird dabei minimiert?</li>
<li>Warum wird er minimiert (und nicht maximiert)?</li>
<li>Lassen Sie sich diesen Term in R ausgeben für Ihre Regression zur Lebenserwartung nach Kontinent.</li>
</ol>
</div>
<div id="lösung-11" class="section level2" number="12.2">
<h2><span class="header-section-number">12.2</span> Lösung</h2>
<ol style="list-style-type: decimal">
<li>Die Summe der quadrierten Residuen wird minimiert (s.o.).</li>
<li>Es wir die Lösung gesucht, bei der die Residuen minimal sind; die Vorhersage also maximal gut.</li>
<li></li>
</ol>
<pre class="r"><code>get_regression_points(lm3) %&gt;% 
  select(residual)</code></pre>
<pre><code>## # A tibble: 142 x 1
##    residual
##       &lt;dbl&gt;
##  1  -26.9  
##  2   -1.23 
##  3   17.5  
##  4  -12.1  
##  5    1.71 
##  6    0.516
##  7    2.18 
##  8    4.91 
##  9   -6.67 
## 10    1.79 
## # … with 132 more rows</code></pre>
</div>
<div id="hinweis-1" class="section level2" number="12.3">
<h2><span class="header-section-number">12.3</span> Hinweis</h2>
<p>Die Summe der Residuen beträgt:</p>
<pre class="r"><code>get_regression_points(lm3) %&gt;% 
  select(residual) %&gt;% 
  summarise(residual_sum = sum(residual))</code></pre>
<pre><code>## # A tibble: 1 x 1
##   residual_sum
##          &lt;dbl&gt;
## 1        0.009</code></pre>
<p>Das ist praktisch Null.</p>
<p>Die Summe der <em>quadrierten</em> Residuen beträgt:</p>
<pre class="r"><code>get_regression_points(lm3) %&gt;% 
  select(residual) %&gt;% 
  summarise(residual_sum = sum(residual^2)) -&gt; residual_squared_sum
residual_squared_sum</code></pre>
<pre><code>## # A tibble: 1 x 1
##   residual_sum
##          &lt;dbl&gt;
## 1        7491.</code></pre>
<p>Die Summe der quadrierten Abweichungen vom Mittelwert beträgt:</p>
<pre class="r"><code>get_regression_points(lm3) %&gt;% 
  mutate(dev_mean_sq = (lifeExp - mean(lifeExp))^2) %&gt;% 
  summarise(dev_mean_sq_sum = sum(dev_mean_sq)) -&gt; dev_mean_squared_sum
dev_mean_squared_sum</code></pre>
<pre><code>## # A tibble: 1 x 1
##   dev_mean_sq_sum
##             &lt;dbl&gt;
## 1          20552.</code></pre>
<p>Teilt man <code>residual_squared_sum</code> durch <code>dev_mean_squared_sum</code>, so erhält man den <em>nicht</em> erklärten Streuungsanteil:</p>
<pre class="r"><code>variance_unexplained &lt;- residual_squared_sum / dev_mean_squared_sum
variance_unexplained</code></pre>
<pre><code>##   residual_sum
## 1    0.3645013</code></pre>
<p>Zieht man von 1 den Anteil nicht erklärter Varianz ab, so erhält man <span class="math inline">\(R^2\)</span>:</p>
<pre class="r"><code>1 - variance_unexplained</code></pre>
<pre><code>##   residual_sum
## 1    0.6354987</code></pre>
<p>Vergleiche:</p>
<pre class="r"><code>summary(lm3)</code></pre>
<pre><code>## 
## Call:
## lm(formula = lifeExp ~ continent, data = gapminder_2007)
## 
## Residuals:
##      Min       1Q   Median       3Q      Max 
## -26.9005  -4.0399   0.2565   3.3840  21.6360 
## 
## Coefficients:
##                   Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)         54.806      1.025  53.446  &lt; 2e-16 ***
## continentAmericas   18.802      1.800  10.448  &lt; 2e-16 ***
## continentAsia       15.922      1.646   9.675  &lt; 2e-16 ***
## continentEurope     22.843      1.695  13.474  &lt; 2e-16 ***
## continentOceania    25.913      5.328   4.863 3.12e-06 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 7.395 on 137 degrees of freedom
## Multiple R-squared:  0.6355, Adjusted R-squared:  0.6249 
## F-statistic: 59.71 on 4 and 137 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
</div>

    </div>


  </article>




  
<section id="comments">
  <div id="disqus_thread"></div>
  <script>
  var disqus_config = function () {
  
  };
  (function() {
    var inIFrame = function() {
      var iframe = true;
      try { iframe = window.self !== window.top; } catch (e) {}
      return iframe;
    };
    if (inIFrame()) return;
    var d = document, s = d.createElement('script');
    s.src = '//https-data-se-netlify-com.disqus.com/embed.js'; s.async = true;
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
  })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>




</main>

      <footer class="footer">
        <ul class="footer-links">
          <li>
            <a href="/index.xml" type="application/rss+xml" target="_blank">RSS feed</a>
          </li>
          <li>
            <a href="https://gohugo.io/" class="footer-links-kudos">Made with <img src="/images/hugo-logo.png" alt="Img link to Hugo website" width="22" height="22"></a>
          </li>
        </ul>
      </footer>

    </div>
    



<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>



<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/r.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/yaml.min.js"></script>
<script>hljs.configure({languages: []}); hljs.initHighlightingOnLoad();</script>



    
<script src="/js/math-code.js"></script>
<script async src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"></script>


    
  </body>
</html>

